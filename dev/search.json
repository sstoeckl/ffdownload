[{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/CLAUDE.html","id":null,"dir":"","previous_headings":"","what":"CLAUDE.md","title":"CLAUDE.md","text":"file provides guidance Claude Code (claude.ai/code) working code repository.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/CLAUDE.html","id":"package-overview","dir":"","previous_headings":"","what":"Package Overview","title":"CLAUDE.md","text":"FFdownload R package downloads datasets Kenneth French‚Äôs data library, processes zipped CSV files, returns nested lists xts time-series objects (tibbles). Published CRAN. Current dev version: 1.2.0.9000 branch dev; stable CRAN release: 1.1.1 master.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/CLAUDE.html","id":"common-commands","dir":"","previous_headings":"","what":"Common Commands","title":"CLAUDE.md","text":"development commands run R via terminal package root. Check package (R CMD CHECK equivalent): Build install locally: Regenerate documentation roxygen2 comments (required editing @ tags adding new exported functions): Build pkgdown website: Rebuild README.md README.Rmd: Run test suite: Load package interactive development:","code":"devtools::check() devtools::install() devtools::document() pkgdown::build_site() devtools::build_readme() devtools::test() # or a single file: testthat::test_file(\"tests/testthat/test-backward-compat.R\") devtools::load_all()"},{"path":[]},{"path":[]},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/CLAUDE.html","id":"ffdownload-rffdownloadr","dir":"","previous_headings":"Architecture","what":"FFdownload() (R/FFdownload.R)","title":"CLAUDE.md","text":"main user-facing function. Three-step pipeline: 1. Scrape Kenneth French‚Äôs website HTML CSV zip-file links. 2. Download selected zip files (filtered via inputlist using fuzzy string matching adist()). 3. Process CSV via converter() converter_tbl(), merge daily/non-daily variants, save .RData containing FFdata. Parameters added v1.2.0 (default original behaviour): - na_values: replace French‚Äôs sentinel values (-99, -999, -99.99) NA - return_data: return FFdata invisibly addition saving - action: cleaner alternative download/download_only flag pair (\"\", \"list_only\", \"download_only\", \"process_only\") - cache_days: reuse zip files tempd younger N days - match_threshold: warn fuzzy-match similarity threshold","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/CLAUDE.html","id":"converter--converter_tbl-rconverterr","dir":"","previous_headings":"Architecture","what":"converter() / converter_tbl() (R/converter.R)","title":"CLAUDE.md","text":"Internal (exported). Parse single French CSV file. French‚Äôs CSVs embed multiple sub-tables one file separated header lines. converter: - Detects section boundaries lines /without commas. - Names sections header text (lowercased, spaces ‚Üí _); unnamed sections become Temp1, Temp2, etc. - Distinguishes annual (4-digit), monthly (6-digit YYYYMM), daily (8-digit YYYYMMDD) sub-tables first-column length. - Returns list(annual=..., monthly=..., daily=...) named xts objects (tibbles converter_tbl). - v1.2.0: accepts na_values parameter; applies sentinel replacement numeric conversion.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/CLAUDE.html","id":"fflist-rfflistr","dir":"","previous_headings":"Architecture","what":"FFlist() (R/FFlist.R)","title":"CLAUDE.md","text":"Scrapes French website returns data frame columns name (dataset name without _CSV.zip suffix, usable directly inputlist) file_url. Uses requireNamespace(\"tibble\") upgrade tibble available.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/CLAUDE.html","id":"ffmatch-rffmatchr","dir":"","previous_headings":"Architecture","what":"FFmatch() (R/FFmatch.R)","title":"CLAUDE.md","text":"Calls FFlist() internally, runs adist() find closest match entry inputlist. Returns data frame requested, matched, edit_distance, similarity columns. Use FFdownload() verify fuzzy matches.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/CLAUDE.html","id":"ffget-rffgetr","dir":"","previous_headings":"Architecture","what":"FFget() (R/FFget.R)","title":"CLAUDE.md","text":"Thin wrapper: calls FFdownload() return_data=TRUE tempfile(), extracts requested frequency subtable slice. Applies na_values=c(-99, -999, -99.99) default (unlike FFdownload() defaults NULL).","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/CLAUDE.html","id":"output-data-structure","dir":"","previous_headings":"Architecture","what":"Output data structure","title":"CLAUDE.md","text":"","code":"FFdata ‚îî‚îÄ‚îÄ x_F-F_Research_Data_Factors          # \"x_\" prefix avoids R name issues with hyphens/digits     ‚îú‚îÄ‚îÄ monthly     ‚îÇ   ‚îú‚îÄ‚îÄ Temp2                         # main factor returns (unnamed sections ‚Üí TempN)     ‚îÇ   ‚îî‚îÄ‚îÄ ...     ‚îú‚îÄ‚îÄ annual     ‚îÇ   ‚îî‚îÄ‚îÄ annual_factors:_january-december     ‚îî‚îÄ‚îÄ daily                             # empty unless exclude_daily=FALSE"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/CLAUDE.html","id":"tests","dir":"","previous_headings":"","what":"Tests","title":"CLAUDE.md","text":"Tests live tests/testthat/test-backward-compat.R. tests use skip_on_cran() skip_if_offline() require network access. test suite covers: - Structural equivalence: FFdownload() old API parameters produces list structure documented v1.1.x vignettes. - return_data=TRUE gives object load(output_file). - action parameter equivalences download/download_only flags. - na_values sentinel replacement. - FFlist(), FFmatch(), FFget() return correct structures values. - cache_days prevents re-downloading fresh files. - match_threshold warning behaviour.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/CLAUDE.html","id":"documentation--ci","dir":"","previous_headings":"","what":"Documentation & CI","title":"CLAUDE.md","text":"Roxygen2 (RoxygenNote: 7.3.1) generates man/ files NAMESPACE ‚Äî edit directly; run devtools::document() instead. README.md generated README.Rmd ‚Äî edit .Rmd file, run devtools::build_readme(). Vignettes vignettes/ built knitr: FFD-xts--.Rmd (xts workflow), FFD-tibble--.Rmd (tidyverse workflow), assetpricing.Rmd (cross-sectional pricing example). GitHub Actions runs R-CMD-check across macOS, Windows, Ubuntu (R devel, release, oldrel-1) push/PR master. pkgdown site auto-deployed via .github/workflows/pkgdown.yaml.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 FFdownload authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (‚ÄúSoftware‚Äù), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED ‚Äú‚Äù, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/articles/FFD-tibble-how-to.html","id":"quick-start-ffget-new-in-v1-2-0","dir":"Articles","previous_headings":"","what":"Quick start: FFget() (new in v1.2.0)","title":"How-to in the Tidyverse","text":"FFget() simplest way get single dataset session. returns tibble directly ‚Äî intermediate .RData file, load() call. Missing-value sentinels (-99, -999, -99.99) converted NA default. Use frequency = NULL get frequencies , subtable = NULL get sub-tables within frequency:","code":"# Monthly FF 3-factor data as a tibble, NAs handled automatically ff3 <- FFget(\"F-F_Research_Data_Factors\", subtable = \"Temp2\") head(ff3) #> # A tibble: 6 √ó 5 #>   date      Mkt.RF   SMB   HML    RF #>   <yearmon>  <dbl> <dbl> <dbl> <dbl> #> 1 Jul 1926    2.89 -2.55 -2.39  0.22 #> ... # All sub-tables for the monthly frequency ff3_monthly <- FFget(\"F-F_Research_Data_Factors\", subtable = NULL) names(ff3_monthly)   # e.g. \"Temp2\"  # Annual data as xts ff3_ann_xts <- FFget(\"F-F_Research_Data_Factors\", frequency = \"annual\", format = \"xts\")"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/articles/FFD-tibble-how-to.html","id":"dataset-discovery-fflist-and-ffmatch","dir":"Articles","previous_headings":"","what":"Dataset discovery: FFlist() and FFmatch()","title":"How-to in the Tidyverse","text":"downloading, browse available datasets check search strings match intended files:","code":"fl <- FFlist() nrow(fl)         # 100+ non-daily datasets fl |> filter(grepl(\"5_Factors|Momentum\", name)) FFmatch(c(\"Research_Data_Factors\", \"Momentum_Factor\")) #> # A tibble: 2 √ó 4 #>   requested             matched                    edit_distance similarity #>   <chr>                 <chr>                              <int>      <dbl> #> 1 Research_Data_Factors F-F_Research_Data_Factors              3      0.87 #> 2 Momentum_Factor       F-F_Momentum_Factor                    4      0.78"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/articles/FFD-tibble-how-to.html","id":"bulk-download-with-ffdownload-classic-api","dir":"Articles","previous_headings":"","what":"Bulk download with FFdownload() (classic API)","title":"How-to in the Tidyverse","text":"downloading multiple datasets one call /saving dated snapshot reproducible research, use FFdownload() directly format = \"tibble\". detailed explanation download / process separation, see vignette(\"FFD-xts--\"). download process one step:","code":"inputlist <- c(\"F-F_Research_Data_Factors_CSV\",\"F-F_Momentum_Factor_CSV\") FFdownload(exclude_daily=TRUE, tempd=outd, download=TRUE, download_only=FALSE,            inputlist=inputlist, output_file=outfile, format=\"tibble\") #> Step 1: getting list of all the csv-zip-files! #> Step 2: Downloading 2 zip-files #> Step 3: Start processing 2 csv-files #>   |                                                                              |                                                                      |   0%  |                                                                              |===================================                                   |  50%  |                                                                              |======================================================================| 100% #> Be aware that as of version 1.0.6 the saved object is named FFdata rather than FFdownload to not be confused with the corresponding command!"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/articles/FFD-tibble-how-to.html","id":"new-parameters","dir":"Articles","previous_headings":"Bulk download with FFdownload() (classic API)","what":"New parameters","title":"How-to in the Tidyverse","text":"Replace French‚Äôs missing-value codes NA processing: Return data list directly addition saving file:","code":"FFdownload(exclude_daily=TRUE, tempd=outd, download=TRUE, download_only=FALSE,            inputlist=inputlist, output_file=outfile, format=\"tibble\",            na_values=c(-99, -999, -99.99)) FFdata <- FFdownload(exclude_daily=TRUE, tempd=outd, download=TRUE,                      download_only=FALSE, inputlist=inputlist,                      output_file=outfile, format=\"tibble\",                      return_data=TRUE)"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/articles/FFD-tibble-how-to.html","id":"working-with-the-result","dir":"Articles","previous_headings":"","what":"Working with the result","title":"How-to in the Tidyverse","text":"Verify sub-tables tibbles: Merge two datasets (date column yearmon object serves join key): Plot cumulative wealth indices using pivot_longer() ggplot2:","code":"load(outfile) ls.str(FFdata) #> x_F-F_Momentum_Factor : List of 3 #>  $ annual :List of 1 #>  $ monthly:List of 1 #>  $ daily  : Named list() #> x_F-F_Research_Data_Factors : List of 3 #>  $ annual :List of 1 #>  $ monthly:List of 1 #>  $ daily  : Named list() str(FFdata$`x_F-F_Research_Data_Factors`$monthly$Temp2) #> tibble [1,194 √ó 5] (S3: tbl_df/tbl/data.frame) #>  $ date  : 'yearmon' num [1:1194] Jul 1926 Aug 1926 Sep 1926 Oct 1926 ... #>  $ Mkt.RF: num [1:1194] 2.89 2.64 0.38 -3.27 2.54 2.62 -0.05 4.17 0.14 0.47 ... #>  $ SMB   : num [1:1194] -2.55 -1.14 -1.36 -0.14 -0.11 -0.07 -0.32 0.07 -1.77 0.39 ... #>  $ HML   : num [1:1194] -2.39 3.81 0.05 0.82 -0.61 0.06 4.58 2.72 -2.38 0.65 ... #>  $ RF    : num [1:1194] 0.22 0.25 0.23 0.32 0.31 0.28 0.25 0.26 0.3 0.25 ... FFfour <- FFdata$`x_F-F_Research_Data_Factors`$monthly$Temp2 %>%   left_join(FFdata$`x_F-F_Momentum_Factor`$monthly$Temp2, by=\"date\") FFfour %>% head() #> # A tibble: 6 √ó 6 #>   date      Mkt.RF   SMB   HML    RF   Mom #>   <yearmon>  <dbl> <dbl> <dbl> <dbl> <dbl> #> 1 Jul 1926    2.89 -2.55 -2.39  0.22    NA #> 2 Aug 1926    2.64 -1.14  3.81  0.25    NA #> 3 Sep 1926    0.38 -1.36  0.05  0.23    NA #> 4 Oct 1926   -3.27 -0.14  0.82  0.32    NA #> 5 Nov 1926    2.54 -0.11 -0.61  0.31    NA #> 6 Dec 1926    2.62 -0.07  0.06  0.28    NA FFfour %>%   pivot_longer(Mkt.RF:Mom, names_to=\"FFVar\", values_to=\"FFret\") %>%   mutate(FFret=FFret/100, date=as.Date(date)) %>%   filter(date>=\"1960-01-01\", !FFVar==\"RF\") %>%   group_by(FFVar) %>% arrange(FFVar, date) %>%   mutate(FFret=ifelse(date==\"1960-01-01\",1,FFret), FFretv=cumprod(1+FFret)-1) %>%   ggplot(aes(x=date, y=FFretv, col=FFVar, type=FFVar)) + geom_line(lwd=1.2) +   scale_y_log10() +   labs(title=\"FF4 Factors\", subtitle=\"Cumulative wealth plots\", ylab=\"cum. returns\") +   scale_colour_viridis_d(\"FFvar\") +   theme_bw() + theme(legend.position=\"bottom\") #> Ignoring unknown labels: #> ‚Ä¢ ylab : \"cum. returns\""},{"path":[]},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/articles/FFD-xts-how-to.html","id":"option-a-fflist-recommended-new-in-v1-2-0","dir":"Articles","previous_headings":"Step 1: Browse available datasets","what":"Option A ‚Äî FFlist() (recommended, new in v1.2.0)","title":"How-to xts","text":"FFlist() returns tidy data frame can filter directly:","code":"fl <- FFlist(exclude_daily = TRUE) nrow(fl)   # 100+ non-daily datasets head(fl)  # Filter with dplyr library(dplyr) fl |> filter(grepl(\"Momentum|Reversal|5_Factors\", name))"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/articles/FFD-xts-how-to.html","id":"option-b-listsave-classic-approach-still-supported","dir":"Articles","previous_headings":"Step 1: Browse available datasets","what":"Option B ‚Äî listsave (classic approach, still supported)","title":"How-to xts","text":"","code":"FFdownload(exclude_daily=TRUE, download=FALSE, download_only=TRUE, listsave=listfile) #> Step 1: getting list of all the csv-zip-files! read.delim(listfile, sep=\",\")[c(1:4, 73:74), ] #>     X                                        x #> 1   1        F-F_Research_Data_Factors_CSV.zip #> 2   2 F-F_Research_Data_Factors_weekly_CSV.zip #> 3   3  F-F_Research_Data_Factors_daily_CSV.zip #> 4   4  F-F_Research_Data_5_Factors_2x3_CSV.zip #> 73 73              F-F_Momentum_Factor_CSV.zip #> 74 74        F-F_Momentum_Factor_daily_CSV.zip"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/articles/FFD-xts-how-to.html","id":"verifying-your-search-strings-with-ffmatch","dir":"Articles","previous_headings":"Step 1: Browse available datasets","what":"Verifying your search strings with FFmatch()","title":"How-to xts","text":"downloading, use FFmatch() confirm (partial) names map datasets intend:","code":"FFmatch(c(\"F-F_Research_Data_Factors_CSV\", \"F-F_Momentum_Factor_CSV\"))"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/articles/FFD-xts-how-to.html","id":"step-2-download-selected-datasets","dir":"Articles","previous_headings":"","what":"Step 2: Download selected datasets","title":"How-to xts","text":"action parameter (new v1.2.0) equivalent readable: cache_days parameter prevents re-downloading files already fresh:","code":"inputlist <- c(\"F-F_Research_Data_Factors_CSV\",\"F-F_Momentum_Factor_CSV\") FFdownload(exclude_daily=TRUE, tempd=outd, download=TRUE, download_only=TRUE, inputlist=inputlist) #> Step 1: getting list of all the csv-zip-files! #> Step 2: Downloading 2 zip-files list.files(outd) #> [1] \"F-F_Momentum_Factor_CSV.zip\"       \"F-F_Research_Data_Factors_CSV.zip\" FFdownload(exclude_daily=TRUE, tempd=outd, action=\"download_only\", inputlist=inputlist) # Reuse any cached file younger than 7 days; only download if stale FFdownload(exclude_daily=TRUE, tempd=outd, action=\"download_only\",            inputlist=inputlist, cache_days=7)"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/articles/FFD-xts-how-to.html","id":"step-3-process-downloaded-files","dir":"Articles","previous_headings":"","what":"Step 3: Process downloaded files","title":"How-to xts","text":"also get data back directly (skipping separate load() call), add return_data=TRUE: replace French‚Äôs missing-value sentinels (-99, -999, -99.99) NA processing:","code":"FFdownload(exclude_daily=TRUE, tempd=outd, download=FALSE, download_only=FALSE,            inputlist=inputlist, output_file=outfile) #> Step 1: getting list of all the csv-zip-files! #> Step 3: Start processing 2 csv-files #>   |                                                                              |                                                                      |   0%  |                                                                              |===================================                                   |  50%  |                                                                              |======================================================================| 100% #> Be aware that as of version 1.0.6 the saved object is named FFdata rather than FFdownload to not be confused with the corresponding command! FFdata <- FFdownload(exclude_daily=TRUE, tempd=outd, download=FALSE,                      download_only=FALSE, inputlist=inputlist,                      output_file=outfile, return_data=TRUE) FFdownload(exclude_daily=TRUE, tempd=outd, download=FALSE, download_only=FALSE,            inputlist=inputlist, output_file=outfile,            na_values=c(-99, -999, -99.99))"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/articles/FFD-xts-how-to.html","id":"step-4-inspect-the-result","dir":"Articles","previous_headings":"","what":"Step 4: Inspect the result","title":"How-to xts","text":"output named list. element corresponds one dataset contains three sub-lists: $monthly, $annual, $daily. Within sub-list, sub-tables named section headings French‚Äôs CSV. section heading name defaults Temp1, Temp2, etc. ‚Äî factor files main returns table always Temp2.","code":"load(outfile) ls.str(FFdata) #> x_F-F_Momentum_Factor : List of 3 #>  $ annual :List of 1 #>  $ monthly:List of 1 #>  $ daily  : Named list() #> x_F-F_Research_Data_Factors : List of 3 #>  $ annual :List of 1 #>  $ monthly:List of 1 #>  $ daily  : Named list() # Discover sub-table names for the factors dataset names(FFdata[[\"x_F-F_Research_Data_Factors\"]]$monthly) #> [1] \"Temp2\" names(FFdata[[\"x_F-F_Research_Data_Factors\"]]$annual) #> [1] \"annual_factors:_january-december\""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/articles/FFD-xts-how-to.html","id":"step-5-use-the-data","dir":"Articles","previous_headings":"","what":"Step 5: Use the data","title":"How-to xts","text":"Code merges monthly xts objects, trims post-1963, plots cumulative wealth indices (credit: Joshua Ulrich):","code":"monthly         <- do.call(merge, lapply(FFdata, function(i) i$monthly$Temp2)) monthly_1963    <- na.omit(monthly)[\"1963/\"] monthly_returns <- cumprod(1 + monthly_1963 / 100) - 1 plot(monthly_returns)"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/articles/assetpricing.html","id":"data","dir":"Articles","previous_headings":"","what":"1 Data","title":"Empirical Asset Pricing with FFdownload","text":"","code":"library(FFdownload) library(dplyr) library(tidyr) library(purrr) library(ggplot2)"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/articles/assetpricing.html","id":"download","dir":"Articles","previous_headings":"1 Data","what":"1.1 Download","title":"Empirical Asset Pricing with FFdownload","text":"download everything one call. na_values converts French‚Äôs missing-value codes (‚àí99, ‚àí999, ‚àí99.99) NA; return_data = TRUE gives us list directly without separate load().","code":"outd   <- file.path(tempdir(), paste0(\"ffap_\", format(Sys.time(), \"%H%M%S\"))) outf   <- tempfile(fileext = \".RData\")  inputlist <- c(   \"25_Portfolios_5x5\",   \"100_Portfolios_10x10\",   \"F-F_Research_Data_Factors\",   \"F-F_Research_Data_5_Factors_2x3\",   \"F-F_Momentum_Factor\" )  FFdata <- FFdownload(   output_file   = outf,   tempd         = outd,   exclude_daily = TRUE,   download      = TRUE,   download_only = FALSE,   inputlist     = inputlist,   format        = \"tbl\",   na_values     = c(-99, -999, -99.99),   return_data   = TRUE ) #>   |                                                                              |                                                                      |   0%  |                                                                              |==============                                                        |  20%  |                                                                              |============================                                          |  40%  |                                                                              |==========================================                            |  60%  |                                                                              |========================================================              |  80%  |                                                                              |======================================================================| 100%"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/articles/assetpricing.html","id":"extract-factors","dir":"Articles","previous_headings":"1 Data","what":"1.2 Extract factors","title":"Empirical Asset Pricing with FFdownload","text":"FF5 file contains five factors risk-free rate. use single factor source (available July 1963), append momentum factor.","code":"# FF5 factors: Mkt.RF, SMB, HML, RMW, CMA, RF  (start: Jul 1963) ff5_raw <- FFdata$`x_F-F_Research_Data_5_Factors_2x3`$monthly$Temp2  # FF3 factors back to Jul 1926 (for time-series tests) ff3_raw <- FFdata$`x_F-F_Research_Data_Factors`$monthly$Temp2  # Momentum factor mom_raw <- FFdata$`x_F-F_Momentum_Factor`$monthly$Temp2  # Combined factor table (full history where all factors are available) factors <- ff5_raw |>   select(date, Mkt.RF, SMB, HML, RMW, CMA, RF) |>   left_join(mom_raw |> select(date, Mom), by = \"date\") |>   filter(!is.na(Mom))    # Mom starts Jan 1927; FF5 starts Jul 1963 ‚Üí ~Jul 1963  # Factor table with FF3 history (no RMW/CMA/Mom) factors_ff3hist <- ff3_raw |>   select(date, Mkt.RF, SMB, HML, RF)  cat(\"Factor sample:\", format(min(factors$date)), \"to\", format(max(factors$date)),     \"‚Äî\", nrow(factors), \"months\\n\") #> Factor sample: Jul 1963 to Dec 2025 ‚Äî 750 months cat(\"FF3 history  :\", format(min(factors_ff3hist$date)), \"to\",     format(max(factors_ff3hist$date)), \"‚Äî\", nrow(factors_ff3hist), \"months\\n\") #> FF3 history  : Jul 1926 to Dec 2025 ‚Äî 1194 months"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/articles/assetpricing.html","id":"extract-test-portfolios","dir":"Articles","previous_headings":"1 Data","what":"1.3 Extract test portfolios","title":"Empirical Asset Pricing with FFdownload","text":"","code":"# Helper: find the value-weighted returns sub-table by name pattern find_vw <- function(monthly_list) {   nm <- names(monthly_list)   vw_nm <- grep(\"value_weight\", nm, ignore.case = TRUE, value = TRUE)   if (length(vw_nm) == 0) stop(\"Cannot find value-weighted sub-table. Available: \",                                 paste(nm, collapse = \", \"))   monthly_list[[vw_nm[1]]] }  # 25 portfolios pf25_vw <- find_vw(FFdata$x_25_Portfolios_5x5$monthly) pf25_cols <- setdiff(names(pf25_vw), \"date\")     # 25 portfolio column names stopifnot(length(pf25_cols) == 25)  # 100 portfolios pf100_vw <- find_vw(FFdata$x_100_Portfolios_10x10$monthly) pf100_cols <- setdiff(names(pf100_vw), \"date\")   # 100 portfolio column names stopifnot(length(pf100_cols) == 100)  cat(\"25-pf column names (first 6):\", paste(head(pf25_cols, 6), collapse=\", \"), \"\\n\") #> 25-pf column names (first 6): SMALL.LoBM, ME1.BM2, ME1.BM3, ME1.BM4, SMALL.HiBM, ME2.BM1"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/articles/assetpricing.html","id":"build-long-panels","dir":"Articles","previous_headings":"1 Data","what":"1.4 Build long panels","title":"Empirical Asset Pricing with FFdownload","text":"","code":"# Long panel for 25 portfolios ‚Äî join with FF3 history pf25_long <- pf25_vw |>   pivot_longer(-date, names_to = \"portfolio\", values_to = \"ret\") |>   left_join(factors_ff3hist, by = \"date\") |>   mutate(     ret_excess = ret - RF,     # Position-based size (S1=small ‚Üí S5=large) and BM (B1=growth ‚Üí B5=value) labels     pf_pos  = as.integer(factor(portfolio, levels = pf25_cols)),     size_q  = ceiling(pf_pos / 5),     bm_q    = ((pf_pos - 1) %% 5) + 1,     size_lbl = factor(size_q, labels = c(\"Small\",\"S2\",\"S3\",\"S4\",\"Large\")),     bm_lbl   = factor(bm_q,   labels = c(\"Growth\",\"B2\",\"B3\",\"B4\",\"Value\"))   ) |>   filter(!is.na(ret_excess), !is.na(Mkt.RF))  # Long panel for 100 portfolios ‚Äî join with FF5+Mom (1963+) pf100_long <- pf100_vw |>   pivot_longer(-date, names_to = \"portfolio\", values_to = \"ret\") |>   left_join(factors, by = \"date\") |>   mutate(     ret_excess = ret - RF,     pf_pos  = as.integer(factor(portfolio, levels = pf100_cols)),     size_q  = ceiling(pf_pos / 10),     bm_q    = ((pf_pos - 1) %% 10) + 1   ) |>   filter(!is.na(ret_excess), !is.na(Mom))   # FF5+Mom sample (Jul 1963+)  cat(\"25-pf panel: \", nrow(pf25_long),  \"rows,\", n_distinct(pf25_long$portfolio),  \"portfolios\\n\") #> 25-pf panel:  29850 rows, 25 portfolios cat(\"100-pf panel:\", nrow(pf100_long), \"rows,\", n_distinct(pf100_long$portfolio), \"portfolios\\n\") #> 100-pf panel: 74828 rows, 100 portfolios"},{"path":[]},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/articles/assetpricing.html","id":"capm-large-and-structured-pricing-errors","dir":"Articles","previous_headings":"2 Time-Series Tests: 25 Size√óBM Portfolios","what":"2.1 CAPM: large and structured pricing errors","title":"Empirical Asset Pricing with FFdownload","text":"CAPM alpha heat map (% per month; red = positive alpha, blue = negative):  heat map shows value tilt CAPM alphas: portfolios highest BM quintile (value) tend positive alphas, growth portfolios cluster near zero negative. However, full sample stretching back July 1926, pattern noisier original Fama-French (1993) paper, used 1963‚Äì1991 data ‚Äî period size value premia particularly strong. CAPM account premia, statistical significance limited: 4 25 alphas clear |t| > 2 threshold conventional levels.","code":"ts_capm <- pf25_long |>   nest_by(portfolio, size_q, bm_q, size_lbl, bm_lbl) |>   mutate(     fit       = list(lm(ret_excess ~ Mkt.RF, data = data)),     alpha     = coef(fit)[[\"(Intercept)\"]],     alpha_se  = summary(fit)$coefficients[\"(Intercept)\", \"Std. Error\"],     alpha_t   = summary(fit)$coefficients[\"(Intercept)\", \"t value\"],     beta_mkt  = coef(fit)[[\"Mkt.RF\"]],     r2        = summary(fit)$r.squared,     n_obs     = nrow(data)   ) |>   ungroup() |>   select(-data, -fit)  cat(\"CAPM ‚Äî mean |alpha|:\", round(mean(abs(ts_capm$alpha)), 3), \"%/month\\n\") #> CAPM ‚Äî mean |alpha|: 0.151 %/month cat(\"       significant alphas (|t| > 2):\",     sum(abs(ts_capm$alpha_t) > 2), \"of\", nrow(ts_capm), \"\\n\") #>        significant alphas (|t| > 2): 4 of 25 ggplot(ts_capm, aes(x = bm_lbl, y = size_lbl, fill = alpha)) +   geom_tile(colour = \"white\", linewidth = 0.5) +   geom_text(aes(label = sprintf(\"%.2f\\n(%.1f)\", alpha, alpha_t)),             size = 2.8, lineheight = 0.9) +   scale_fill_gradient2(low = \"#4575b4\", mid = \"white\", high = \"#d73027\",                        midpoint = 0, name = \"Œ± (%/mo)\") +   scale_x_discrete(position = \"top\") +   labs(title    = \"CAPM Alphas ‚Äî 25 Size√óBM Portfolios\",        subtitle = \"Cell: alpha (t-stat); sample: Jul 1926 ‚Äì present\",        x = \"Book-to-Market Quintile\", y = \"Size Quintile\") +   theme_minimal(base_size = 11) +   theme(axis.text.x = element_text(angle = 0))"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/articles/assetpricing.html","id":"ff3-modest-improvement-over-the-full-sample","dir":"Articles","previous_headings":"2 Time-Series Tests: 25 Size√óBM Portfolios","what":"2.2 FF3: modest improvement over the full sample","title":"Empirical Asset Pricing with FFdownload","text":"run full French library sample (July 1926 present), FF3 improvement muted original 1993 paper suggests. Mean absolute alpha falls 0.151 0.114 %/month ‚Äî 25% reduction. Notably, number statistically significant alphas may increase rather decrease FF3: three factors fit portfolios well exposing pricing errors others CAPM masked higher residual variance. value premium weakened substantially post-2004, well-documented phenomenon (Fama French 2015; Hou, Xue Zhang 2015), attenuates FF3‚Äôs advantage recent decades included.","code":"ts_ff3 <- pf25_long |>   nest_by(portfolio, size_q, bm_q, size_lbl, bm_lbl) |>   mutate(     fit      = list(lm(ret_excess ~ Mkt.RF + SMB + HML, data = data)),     alpha    = coef(fit)[[\"(Intercept)\"]],     alpha_se = summary(fit)$coefficients[\"(Intercept)\", \"Std. Error\"],     alpha_t  = summary(fit)$coefficients[\"(Intercept)\", \"t value\"],     b_mkt    = coef(fit)[[\"Mkt.RF\"]],     b_smb    = coef(fit)[[\"SMB\"]],     b_hml    = coef(fit)[[\"HML\"]],     r2       = summary(fit)$r.squared   ) |>   ungroup() |>   select(-data, -fit)  cat(\"FF3 ‚Äî mean |alpha|:\", round(mean(abs(ts_ff3$alpha)), 3), \"%/month\\n\") #> FF3 ‚Äî mean |alpha|: 0.114 %/month cat(\"      significant alphas (|t| > 2):\",     sum(abs(ts_ff3$alpha_t) > 2), \"of\", nrow(ts_ff3), \"\\n\") #>       significant alphas (|t| > 2): 7 of 25 ggplot(ts_ff3, aes(x = bm_lbl, y = size_lbl, fill = alpha)) +   geom_tile(colour = \"white\", linewidth = 0.5) +   geom_text(aes(label = sprintf(\"%.2f\\n(%.1f)\", alpha, alpha_t)),             size = 2.8, lineheight = 0.9) +   scale_fill_gradient2(low = \"#4575b4\", mid = \"white\", high = \"#d73027\",                        midpoint = 0, name = \"Œ± (%/mo)\") +   scale_x_discrete(position = \"top\") +   labs(title    = \"FF3 Alphas ‚Äî 25 Size√óBM Portfolios\",        subtitle = \"Cell: alpha (t-stat); sample: Jul 1926 ‚Äì present\",        x = \"Book-to-Market Quintile\", y = \"Size Quintile\") +   theme_minimal(base_size = 11)"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/articles/assetpricing.html","id":"side-by-side-comparison","dir":"Articles","previous_headings":"2 Time-Series Tests: 25 Size√óBM Portfolios","what":"2.3 Side-by-side comparison","title":"Empirical Asset Pricing with FFdownload","text":"","code":"bind_rows(   ts_capm |> mutate(model = \"CAPM\"),   ts_ff3  |> mutate(model = \"FF3\") ) |>   mutate(     sig = ifelse(abs(alpha_t) > 2, \"p < 0.05\", \"n.s.\"),     label = paste0(\"S\", size_q, \"B\", bm_q)   ) |>   ggplot(aes(x = reorder(label, bm_q + (size_q - 1) * 5),              y = alpha, colour = model, shape = sig)) +   geom_hline(yintercept = 0, linetype = \"dashed\", colour = \"grey50\") +   geom_errorbar(aes(ymin = alpha - 2 * alpha_se, ymax = alpha + 2 * alpha_se),                 width = 0.3, alpha = 0.5) +   geom_point(size = 2.5) +   scale_colour_manual(values = c(CAPM = \"#e41a1c\", FF3 = \"#377eb8\")) +   scale_shape_manual(values = c(\"p < 0.05\" = 16, \"n.s.\" = 1)) +   labs(title    = \"Pricing Errors: CAPM vs FF3\",        subtitle = \"Portfolios ordered by BM within size quintile; bars = ¬±2 SE\",        x = \"Portfolio (S = size, B = book-to-market quintile)\",        y = \"Alpha (%/month)\", colour = \"Model\", shape = \"\") +   theme_bw(base_size = 10) +   theme(axis.text.x = element_text(angle = 90, vjust = 0.5, size = 7))"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/articles/assetpricing.html","id":"grs-test","dir":"Articles","previous_headings":"","what":"3 GRS Test","title":"Empirical Asset Pricing with FFdownload","text":"Gibbons, Ross Shanken (1989) test checks whether N pricing errors jointly zero. statistic : GRS=T‚àíN‚àíKN‚ãÖùõÇÃÇ‚Ä≤ùö∫ÃÇ‚àí1ùõÇÃÇ1+ùõçÃÇf‚Ä≤ùõÄÃÇf‚àí1ùõçÃÇf‚àºF(N,T‚àíN‚àíK)\\text{GRS} = \\frac{T - N - K}{N} \\cdot   \\frac{\\hat{\\boldsymbol{\\alpha}}'\\hat{\\boldsymbol{\\Sigma}}^{-1}\\hat{\\boldsymbol{\\alpha}}}        {1 + \\hat{\\boldsymbol{\\mu}}_f'\\hat{\\boldsymbol{\\Omega}}_f^{-1}\\hat{\\boldsymbol{\\mu}}_f} \\;\\sim\\; F(N,\\; T-N-K) GRS Test ‚Äî 25 Size√óBM Portfolios models strongly rejected GRS test (p-values ‚âà 0). full historical sample two GRS statistics close magnitude (3.309 CAPM vs 3.277 FF3), reflecting fact FF3 factors constructed price 1963‚Äì1991 period. Extending sample back 1926 forward present ‚Äî value premium weakened considerably ‚Äî limits much SMB HML can reduce joint pricing errors relative CAPM. shorter sub-samples aligned original paper, FF3 typically shows much larger improvement.","code":"grs_test <- function(returns_xmat, factors_xmat) {   # returns_xmat : T √ó N matrix of excess portfolio returns (no NAs)   # factors_xmat : T √ó K matrix of factor excess returns   T <- nrow(returns_xmat); N <- ncol(returns_xmat); K <- ncol(factors_xmat)   stopifnot(T > N + K + 1)    # OLS: Y = X*B + E  where X = [1 | factors]   X     <- cbind(1, factors_xmat)   B     <- solve(crossprod(X), crossprod(X, returns_xmat))  # (K+1) √ó N   E     <- returns_xmat - X %*% B                           # T √ó N residuals   alpha <- B[1, ]                                           # N intercepts    # MLE residual covariance   Sigma <- crossprod(E) / T    # Factor Sharpe ratio squared   mu_f  <- colMeans(factors_xmat)   Omega <- crossprod(scale(factors_xmat, center = TRUE, scale = FALSE)) / T   sr2   <- as.numeric(t(mu_f) %*% solve(Omega) %*% mu_f)    # GRS statistic   grs_stat <- ((T - N - K) / N) *     as.numeric(t(alpha) %*% solve(Sigma) %*% alpha) / (1 + sr2)   p_val <- pf(grs_stat, df1 = N, df2 = T - N - K, lower.tail = FALSE)    list(GRS = round(grs_stat, 3), p_value = round(p_val, 4),        df1 = N, df2 = T - N - K,        mean_abs_alpha = round(mean(abs(alpha)), 4)) } # Build wide matrices aligned to the same dates pf25_wide <- pf25_long |>   select(date, portfolio, ret_excess) |>   pivot_wider(names_from = portfolio, values_from = ret_excess)  # Merge factors on same dates and drop any rows with NAs pf25_merged <- pf25_wide |>   left_join(factors_ff3hist |> select(date, Mkt.RF, SMB, HML), by = \"date\") |>   drop_na()  ret_mat_25  <- as.matrix(pf25_merged[, pf25_cols]) capm_f_mat  <- as.matrix(pf25_merged[, \"Mkt.RF\",  drop = FALSE]) ff3_f_mat   <- as.matrix(pf25_merged[, c(\"Mkt.RF\",\"SMB\",\"HML\")])  grs_capm <- grs_test(ret_mat_25, capm_f_mat) grs_ff3  <- grs_test(ret_mat_25, ff3_f_mat)  tibble(   Model                 = c(\"CAPM\", \"FF3\"),   `GRS statistic`       = c(grs_capm$GRS,           grs_ff3$GRS),   `p-value`             = c(grs_capm$p_value,        grs_ff3$p_value),   `F(N, T-N-K)`         = c(sprintf(\"F(%d,%d)\", grs_capm$df1, grs_capm$df2),                              sprintf(\"F(%d,%d)\", grs_ff3$df1,  grs_ff3$df2)),   `Mean |Œ±| (%/mo)`     = c(grs_capm$mean_abs_alpha, grs_ff3$mean_abs_alpha) ) |>   knitr::kable(digits = 4, align = \"lrrrr\",                caption = \"GRS Test ‚Äî 25 Size√óBM Portfolios\")"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/articles/assetpricing.html","id":"momentum-the-anomaly-ff3-cannot-explain","dir":"Articles","previous_headings":"","what":"4 Momentum: The Anomaly FF3 Cannot Explain","title":"Empirical Asset Pricing with FFdownload","text":"WML (Winners Minus Losers) factor Carhart (1997) delivers large positive return CAPM FF3 fail explain. Momentum (WML) ‚Äî Mean Return Pricing Errors  FF3 alpha WML large highly significant ‚Äî three-factor model mechanism price momentum. motivates Carhart four-factor model , later, FF5 model (also fails explain momentum).","code":"# WML time series wml <- mom_raw |>   select(date, Mom) |>   left_join(factors_ff3hist, by = \"date\") |>   filter(!is.na(Mom), !is.na(Mkt.RF))  # Average WML return with t-statistic wml_mean <- mean(wml$Mom) wml_t    <- t.test(wml$Mom)$statistic  # CAPM alpha for WML fit_wml_capm <- lm(Mom ~ Mkt.RF, data = wml) # FF3 alpha for WML fit_wml_ff3  <- lm(Mom ~ Mkt.RF + SMB + HML, data = wml)  mom_summary <- tibble(   Measure                  = c(\"Mean WML return\", \"CAPM alpha\", \"FF3 alpha\"),   `Estimate (%/mo)`        = c(wml_mean,                                 coef(fit_wml_capm)[\"(Intercept)\"],                                 coef(fit_wml_ff3) [\"(Intercept)\"]),   `t-statistic`            = c(wml_t,                                 summary(fit_wml_capm)$coef[\"(Intercept)\", \"t value\"],                                 summary(fit_wml_ff3) $coef[\"(Intercept)\", \"t value\"]) )  knitr::kable(mom_summary, digits = 3, align = \"lrr\",              caption = \"Momentum (WML) ‚Äî Mean Return and Pricing Errors\") # Rolling 5-year average WML return wml |>   mutate(date_num = as.numeric(as.Date(date)),          roll_mean = zoo::rollapply(Mom, width = 60, FUN = mean,                                     fill = NA, align = \"right\")) |>   ggplot(aes(x = as.Date(date))) +   geom_col(aes(y = Mom), fill = \"grey80\", width = 20) +   geom_line(aes(y = roll_mean), colour = \"#e41a1c\", linewidth = 1) +   geom_hline(yintercept = 0, linetype = \"dashed\") +   labs(title    = \"WML Momentum Factor\",        subtitle = \"Bars = monthly return; red line = 60-month rolling average\",        x = NULL, y = \"Return (%/month)\") +   theme_bw()"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/articles/assetpricing.html","id":"fama-macbeth-cross-sectional-regressions","dir":"Articles","previous_headings":"","what":"5 Fama-MacBeth Cross-Sectional Regressions","title":"Empirical Asset Pricing with FFdownload","text":"Fama MacBeth (1973) approach tests whether factor betas priced cross-section: First pass ‚Äî portfolio ii, estimate factor betas via full-sample time-series regression: rit‚àírft=Œ±i+ùõÉi‚Ä≤ùêüt+Œµitr_{} - r_{ft} = \\alpha_i + \\boldsymbol{\\beta}_i'\\mathbf{f}_t + \\varepsilon_{} Second pass ‚Äî month tt, regress cross-sectional excess returns estimated betas: rit‚àírft=Œª0t+ùõåt‚Ä≤ùõÉÃÇ+uitr_{} - r_{ft} = \\lambda_{0t} + \\boldsymbol{\\lambda}_t'\\hat{\\boldsymbol{\\beta}}_i + u_{} Average monthly Œªt\\lambda_t estimates compute Newey-West standard errors account serial correlation pricing errors.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/articles/assetpricing.html","id":"helper-functions","dir":"Articles","previous_headings":"5 Fama-MacBeth Cross-Sectional Regressions","what":"5.1 Helper functions","title":"Empirical Asset Pricing with FFdownload","text":"","code":"# Newey-West standard error for the mean of a time series nw_se <- function(x, lags = NULL) {   x   <- x[!is.na(x)]   T   <- length(x)   if (is.null(lags)) lags <- floor(4 * (T / 100)^(2/9))   xd  <- x - mean(x)   v   <- sum(xd^2) / T   if (lags > 0) {     for (l in seq_len(lags)) {       v <- v + 2 * (1 - l / (lags + 1)) * sum(xd[(l+1):T] * xd[1:(T-l)]) / T     }   }   sqrt(v / T) }  # Full FMB procedure # returns_mat : T √ó N matrix of excess returns # factors_mat : T √ó K matrix of factors fmb <- function(returns_mat, factors_mat, factor_names = NULL) {   T <- nrow(returns_mat); N <- ncol(returns_mat); K <- ncol(factors_mat)   if (is.null(factor_names)) factor_names <- colnames(factors_mat)    # ‚îÄ‚îÄ First pass: full-sample OLS betas ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   X_ts   <- cbind(1, factors_mat)   B_ts   <- solve(crossprod(X_ts), crossprod(X_ts, returns_mat))   betas  <- t(B_ts[-1, , drop = FALSE])   # N √ó K    # ‚îÄ‚îÄ Second pass: monthly cross-sectional regressions ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   X_cs    <- cbind(1, betas)              # N √ó (K+1)   gammas  <- matrix(NA_real_, nrow = T, ncol = K + 1)    for (t in seq_len(T)) {     y_t   <- returns_mat[t, ]     ok    <- !is.na(y_t)     if (sum(ok) > K + 1) {       gammas[t, ] <- lm.fit(X_cs[ok, , drop = FALSE], y_t[ok])$coefficients     }   }    # ‚îÄ‚îÄ Average lambdas + Newey-West t-stats ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   lambda_names <- c(\"Intercept\", factor_names)   lam_mean <- colMeans(gammas, na.rm = TRUE)   lam_se   <- apply(gammas, 2, nw_se)   lam_t    <- lam_mean / lam_se    tibble(     term       = lambda_names,     lambda     = lam_mean,     nw_se      = lam_se,     t_stat     = lam_t,     signif     = case_when(       abs(lam_t) > 3.29 ~ \"***\",       abs(lam_t) > 2.58 ~ \"**\",       abs(lam_t) > 1.96 ~ \"*\",       TRUE               ~ \"\"     )   ) }"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/articles/assetpricing.html","id":"prepare-100-portfolio-matrices","dir":"Articles","previous_headings":"5 Fama-MacBeth Cross-Sectional Regressions","what":"5.2 Prepare 100-portfolio matrices","title":"Empirical Asset Pricing with FFdownload","text":"","code":"# Wide matrices aligned to the same dates (FF5+Mom sample, Jul 1963+) pf100_wide <- pf100_long |>   select(date, portfolio, ret_excess) |>   pivot_wider(names_from = portfolio, values_from = ret_excess)  pf100_merged <- pf100_wide |>   left_join(factors, by = \"date\") |>   drop_na()  ret100   <- as.matrix(pf100_merged[, pf100_cols]) f_capm   <- as.matrix(pf100_merged[, \"Mkt.RF\",                    drop = FALSE]) f_ff3    <- as.matrix(pf100_merged[, c(\"Mkt.RF\",\"SMB\",\"HML\")]) f_ff4    <- as.matrix(pf100_merged[, c(\"Mkt.RF\",\"SMB\",\"HML\",\"Mom\")]) f_ff5    <- as.matrix(pf100_merged[, c(\"Mkt.RF\",\"SMB\",\"HML\",\"RMW\",\"CMA\")])  cat(\"FMB sample:\", format(min(pf100_merged$date)), \"to\",     format(max(pf100_merged$date)), \"‚Äî\", nrow(pf100_merged), \"months\\n\") #> FMB sample: Jul 1963 to Dec 2025 ‚Äî 630 months cat(\"100 portfolios x\", ncol(ret100), \"columns (check: should be 100)\\n\") #> 100 portfolios x 100 columns (check: should be 100)"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/articles/assetpricing.html","id":"run-fmb-for-all-four-models","dir":"Articles","previous_headings":"5 Fama-MacBeth Cross-Sectional Regressions","what":"5.3 Run FMB for all four models","title":"Empirical Asset Pricing with FFdownload","text":"","code":"res_capm <- fmb(ret100, f_capm, \"Mkt.RF\") res_ff3  <- fmb(ret100, f_ff3,  c(\"Mkt.RF\",\"SMB\",\"HML\")) res_ff4  <- fmb(ret100, f_ff4,  c(\"Mkt.RF\",\"SMB\",\"HML\",\"Mom\")) res_ff5  <- fmb(ret100, f_ff5,  c(\"Mkt.RF\",\"SMB\",\"HML\",\"RMW\",\"CMA\"))"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/articles/assetpricing.html","id":"results","dir":"Articles","previous_headings":"5 Fama-MacBeth Cross-Sectional Regressions","what":"5.4 Results","title":"Empirical Asset Pricing with FFdownload","text":"Fama-MacBeth Results ‚Äî 100 Size√óBM Portfolios. Entries: lambda estimate (significance) (NW t-stat). , ,  = |t| > 1.96, 2.58, 3.29.","code":"# All factor names across all models all_terms <- c(\"Intercept\",\"Mkt.RF\",\"SMB\",\"HML\",\"Mom\",\"RMW\",\"CMA\")  fmt_col <- function(res, model_name) {   res |>     mutate(cell = sprintf(\"%.3f%s\\n(%.2f)\", lambda, signif, t_stat)) |>     select(term, cell) |>     right_join(tibble(term = all_terms), by = \"term\") |>     mutate(cell = replace_na(cell, \"‚Äî\")) |>     rename(!!model_name := cell) }  fmb_table <- fmt_col(res_capm, \"CAPM\") |>   left_join(fmt_col(res_ff3, \"FF3\"),  by = \"term\") |>   left_join(fmt_col(res_ff4, \"FF4\"),  by = \"term\") |>   left_join(fmt_col(res_ff5, \"FF5\"),  by = \"term\") |>   rename(Factor = term)  knitr::kable(fmb_table, align = \"lcccc\",              caption = paste(                \"Fama-MacBeth Results ‚Äî 100 Size√óBM Portfolios.\",                \"Entries: lambda estimate (significance) and (NW t-stat).\",                \"*, **, *** = |t| > 1.96, 2.58, 3.29.\")) # Lambda point estimates with 95% NW confidence intervals bind_rows(   res_capm |> mutate(model = \"CAPM\"),   res_ff3  |> mutate(model = \"FF3\"),   res_ff4  |> mutate(model = \"FF4 (Carhart)\"),   res_ff5  |> mutate(model = \"FF5\") ) |>   filter(term != \"Intercept\") |>   mutate(     lo = lambda - 1.96 * nw_se,     hi = lambda + 1.96 * nw_se,     term  = factor(term,  levels = c(\"Mkt.RF\",\"SMB\",\"HML\",\"Mom\",\"RMW\",\"CMA\")),     model = factor(model, levels = c(\"CAPM\",\"FF3\",\"FF4 (Carhart)\",\"FF5\"))   ) |>   ggplot(aes(x = term, y = lambda, colour = model,              ymin = lo, ymax = hi)) +   geom_hline(yintercept = 0, linetype = \"dashed\", colour = \"grey50\") +   geom_errorbar(position = position_dodge(width = 0.5), width = 0.25, alpha = 0.7) +   geom_point(position = position_dodge(width = 0.5), size = 3) +   scale_colour_brewer(palette = \"Set1\") +   labs(title    = \"FMB Risk Prices Œª ‚Äî 100 Size√óBM Portfolios\",        subtitle = \"Point = NW mean; bars = 95% NW confidence interval\",        x = \"Factor\", y = \"Risk price Œª (%/month)\", colour = \"Model\") +   theme_bw()"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/articles/assetpricing.html","id":"interpretation","dir":"Articles","previous_headings":"5 Fama-MacBeth Cross-Sectional Regressions","what":"5.5 Interpretation","title":"Empirical Asset Pricing with FFdownload","text":"FMB results current full-history data reveal classic findings modern limitations: CAPM: market beta price (ŒªMkt\\lambda_{\\text{Mkt}}) negative statistically insignificant, intercept significantly positive. priced factor Œª‚âà\\lambda \\approx mean factor return intercept ‚âà0\\approx 0; CAPM fails conditions ‚Äî consistent Fama MacBeth (1973) subsequent replications. FF3: HML retains borderline-significant positive price risk, SMB‚Äôs risk price statistically indistinguishable zero current sample. size premium largely disappeared 1980s (Hou, Xue Zhang 2015; Fama French 2015). known post-publication result: cross-sectional power SMB declined sharply using data 1990. FF4 (Carhart): Momentum contributes additional cross-sectional explanatory power; price risk consistent sign large time-series WML premium documented Section 4. FF5: RMW (profitability) carries robust positive risk price among new factors ‚Äî consistent Fama French (2015, 2016). CMA‚Äôs estimate positive less precise. FF (2015) argue, HML becomes partially redundant RMW CMA included, visible smaller HML coefficient relative FF3 model.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/articles/assetpricing.html","id":"summary","dir":"Articles","previous_headings":"","what":"6 Summary","title":"Empirical Asset Pricing with FFdownload","text":"25 Size√óBM portfolios present severe challenge CAPM; CAPM FF3 rejected GRS test. However, French‚Äôs data now spanning Jul 1926 Dec 2025, FF3 improvement CAPM modest original 1993 paper. value size premia weakened substantially since mid-2000s ‚Äî textbook example post-publication factor decay. Momentum remains robust anomaly unexplained CAPM FF3. FMB cross-section, RMW (profitability) reliably priced factor current sample, SMB‚Äôs risk price statistically negligible.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Sebastian Stoeckl. Author, maintainer.            Package commissioner maintainer. Annar Massimov. Contributor.           Original developer FFdownload.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Stoeckl S (2025). FFdownload: Download Data Kenneth French's Website. doi:10.32614/CRAN.package.FFdownload, R package version 1.1.1, https://CRAN.R-project.org/package=FFdownload.","code":"@Manual{,   title = {FFdownload: Download Data from Kenneth French's Website},   author = {Sebastian Stoeckl},   year = {2025},   note = {R package version 1.1.1},   url = {https://CRAN.R-project.org/package=FFdownload},   doi = {10.32614/CRAN.package.FFdownload}, }"},{"path":[]},{"path":[]},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/index.html","id":"whats-new","dir":"","previous_headings":"","what":"What‚Äôs new","title":"Download Data from Kenneth French's Website","text":"Version 1.2.0 (development) adds three convenience functions several quality--life improvements remaining fully backward compatible: existing FFdownload() calls continue work without changes. Version 1.1.1 corrects small error publication CRAN.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/index.html","id":"motivation","dir":"","previous_headings":"","what":"Motivation","title":"Download Data from Kenneth French's Website","text":"One often needs datasets empirical work tedious effort download (zipped) csv, open manually separate contained datasets. package downloads automatically, converts list xts-objects (tibbles) contain information csv-files.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/index.html","id":"contributors","dir":"","previous_headings":"","what":"Contributors","title":"Download Data from Kenneth French's Website","text":"Original code MasimovR https://github.com/MasimovR/. heavily redacted .","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Download Data from Kenneth French's Website","text":"can install stable release FFdownload CRAN : Install development version (v1.2.0) GitHub :","code":"install.packages(\"FFdownload\") # install.packages(\"devtools\") devtools::install_github(\"sstoeckl/FFdownload@dev\")"},{"path":[]},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/index.html","id":"example-0-one-liner-with-ffget-new-in-v120","dir":"","previous_headings":"Examples","what":"Example 0: One-liner with FFget() (new in v1.2.0)","title":"Download Data from Kenneth French's Website","text":"FFget() fastest way get single dataset session. intermediate file, load() call, missing values (-99, -999, -99.99) replaced NA default. bulk downloads, reproducible snapshots, xts output, see Examples 1‚Äì3 .","code":"library(FFdownload) library(tidyverse)  # Get the FF 5-factor monthly data directly as a tibble ff5 <- FFget(\"F-F_Research_Data_5_Factors_2x3\", subtable = \"Temp2\") head(ff5) ff5 |>   tidyr::pivot_longer(cols = -date, names_to = \"FFFactors\", values_to = \"Value\") |>   group_by(FFFactors) |> mutate(Price = cumprod(1 + Value / 100)) |>   ggplot2::ggplot(aes(x = date, col = FFFactors, y = Price)) +   geom_line(lwd = 1.2) + theme_bw() + theme(legend.position = \"bottom\")"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/index.html","id":"dataset-discovery-with-fflist-and-ffmatch-new-in-v120","dir":"","previous_headings":"Examples","what":"Dataset Discovery with FFlist() and FFmatch() (new in v1.2.0)","title":"Download Data from Kenneth French's Website","text":"downloading, can browse available datasets verify search strings match intended files. FFmatch() shows exactly file search string matched , including similarity score (0.3 = possibly wrong match):","code":"# All non-daily datasets as a tidy data frame (tibble) fl <- FFlist() nrow(fl)        # typically 100+ datasets head(fl, 8) # Filter with dplyr library(dplyr) FFlist() |> filter(grepl(\"Momentum|Reversal\", name)) FFmatch(c(\"Research_Data_Factors\", \"Momentum\", \"ST_Reversal\", \"zzz\")) #> # A tibble: 4 √ó 4 #>   requested             matched                           edit_distance similarity #>   <chr>                 <chr>                                     <int>      <dbl> #> 1 Research_Data_Factors F-F_Research_Data_Factors                     3      0.87 #> 2 Momentum              F-F_Momentum_Factor                           9      0.44 #> 3 ST_Reversal           F-F_ST_Reversal_Factor                       10      0.42 #> 4 zzz                   F-F_Research_Data_Factors                    22      0.11  ‚Üê low!"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/index.html","id":"example-1-multi-dataset-bulk-download-classic-api","dir":"","previous_headings":"Examples","what":"Example 1: Multi-dataset bulk download (classic API)","title":"Download Data from Kenneth French's Website","text":"classic workflow downloads multiple datasets one call saves .RData snapshot ‚Äî ideal reproducible research.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/index.html","id":"step-1-browse-available-datasets","dir":"","previous_headings":"Examples > Example 1: Multi-dataset bulk download (classic API)","what":"Step 1: Browse available datasets","title":"Download Data from Kenneth French's Website","text":"","code":"temptxt <- tempfile(fileext = \".txt\") FFdownload(exclude_daily=TRUE, download=FALSE, download_only=TRUE, listsave=temptxt) FFlist_old <- readr::read_csv(temptxt) %>% dplyr::select(2) %>% dplyr::rename(Files=x) FFlist_old %>% dplyr::slice(1:3, (dplyr::n()-2):dplyr::n()) #> # A tibble: 6 √ó 1 #>   Files                                           #>   <chr>                                           #> 1 F-F_Research_Data_Factors_CSV.zip               #> 2 F-F_Research_Data_Factors_weekly_CSV.zip        #> 3 F-F_Research_Data_Factors_daily_CSV.zip         #> 4 Emerging_Markets_4_Portfolios_BE-ME_OP_CSV.zip  #> 5 Emerging_Markets_4_Portfolios_OP_INV_CSV.zip    #> 6 Emerging_Markets_4_Portfolios_BE-ME_INV_CSV.zip"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/index.html","id":"step-2-download-selected-datasets","dir":"","previous_headings":"Examples > Example 1: Multi-dataset bulk download (classic API)","what":"Step 2: Download selected datasets","title":"Download Data from Kenneth French's Website","text":"action parameter (new v1.2.0) readable alternative download=TRUE, download_only=TRUE:","code":"tempd <- tempdir() inputlist <- c(\"F-F_Research_Data_Factors\",\"F-F_Momentum_Factor\",\"F-F_ST_Reversal_Factor\",\"F-F_LT_Reversal_Factor\") # Classic syntax (still works): FFdownload(exclude_daily=TRUE, tempd=tempd, download=TRUE, download_only=TRUE, inputlist=inputlist) # Equivalent new syntax: # FFdownload(exclude_daily=TRUE, tempd=tempd, action=\"download_only\", inputlist=inputlist)"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/index.html","id":"step-3-process-downloaded-files","dir":"","previous_headings":"Examples > Example 1: Multi-dataset bulk download (classic API)","what":"Step 3: Process downloaded files","title":"Download Data from Kenneth French's Website","text":"return_data = TRUE (new v1.2.0) lets skip load() step:","code":"tempf <- paste0(tempd,\"\\\\FFdata.RData\") FFdownload(output_file = tempf, exclude_daily=TRUE, tempd=tempd, download=FALSE,            download_only=FALSE, inputlist=inputlist, format=\"tbl\") #>   |                                                                              |                                                                      |   0%  |                                                                              |==================                                                    |  25%  |                                                                              |===================================                                   |  50%  |                                                                              |====================================================                  |  75%  |                                                                              |======================================================================| 100% FFdata <- FFdownload(output_file = tempf, exclude_daily=TRUE, tempd=tempd,                      download=FALSE, download_only=FALSE, inputlist=inputlist,                      format=\"tbl\", return_data=TRUE)"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/index.html","id":"step-4-inspect-and-join-monthly-data","dir":"","previous_headings":"Examples > Example 1: Multi-dataset bulk download (classic API)","what":"Step 4: Inspect and join monthly data","title":"Download Data from Kenneth French's Website","text":"","code":"library(timetk) load(file = tempf) FFdata$`x_F-F_Research_Data_Factors`$monthly$Temp2 %>%   left_join(FFdata$`x_F-F_Momentum_Factor`$monthly$Temp2, by=\"date\") %>%   left_join(FFdata$`x_F-F_LT_Reversal_Factor`$monthly$Temp2, by=\"date\") %>%   left_join(FFdata$`x_F-F_ST_Reversal_Factor`$monthly$Temp2, by=\"date\") %>% head() #> # A tibble: 6 √ó 8 #>   date      Mkt.RF   SMB   HML    RF   Mom LT_Rev ST_Rev #>   <yearmon>  <dbl> <dbl> <dbl> <dbl> <dbl>  <dbl>  <dbl> #> 1 Jul 1926    2.89 -2.55 -2.39  0.22    NA     NA  -1.76 #> 2 Aug 1926    2.64 -1.14  3.81  0.25    NA     NA   1.43 #> 3 Sep 1926    0.38 -1.36  0.05  0.23    NA     NA  -0.07 #> 4 Okt 1926   -3.27 -0.14  0.82  0.32    NA     NA  -2.03 #> 5 Nov 1926    2.54 -0.11 -0.61  0.31    NA     NA   0.98 #> 6 Dez 1926    2.62 -0.07  0.06  0.28    NA     NA   1.95"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/index.html","id":"step-5-annual-data","dir":"","previous_headings":"Examples > Example 1: Multi-dataset bulk download (classic API)","what":"Step 5: Annual data","title":"Download Data from Kenneth French's Website","text":"","code":"FFfive <- FFdata$`x_F-F_Research_Data_Factors`$annual$`annual_factors:_january-december` %>%   left_join(FFdata$`x_F-F_Momentum_Factor`$annual$`january-december`, by=\"date\") %>%   left_join(FFdata$`x_F-F_LT_Reversal_Factor`$annual$`january-december`, by=\"date\") %>%   left_join(FFdata$`x_F-F_ST_Reversal_Factor`$annual$`january-december`, by=\"date\") FFfive %>% head() #> # A tibble: 6 √ó 8 #>   date      Mkt.RF    SMB    HML    RF   Mom LT_Rev ST_Rev #>   <yearmon>  <dbl>  <dbl>  <dbl> <dbl> <dbl>  <dbl>  <dbl> #> 1 Dez 1927    29.4  -2.2   -4.58  3.12  24.4  NA    -18.7  #> 2 Dez 1928    35.6   3.73  -5.26  3.56  26.5  NA     -8.82 #> 3 Dez 1929   -19.6 -30.7   11.9   4.75  19.7  NA    -15.0  #> 4 Dez 1930   -31.1  -5.53 -11.8   2.41  24.1  NA     -1.18 #> 5 Dez 1931   -44.8   3.07 -13.7   1.07  23.3  -4.62  27.2  #> 6 Dez 1932    -9.6   5.03  11.7   0.96 -20.6  14.1   27.9"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/index.html","id":"step-6-wealth-index-plot","dir":"","previous_headings":"Examples > Example 1: Multi-dataset bulk download (classic API)","what":"Step 6: Wealth index plot","title":"Download Data from Kenneth French's Website","text":"","code":"FFfive %>%   pivot_longer(Mkt.RF:ST_Rev, names_to=\"FFVar\", values_to=\"FFret\") %>%   mutate(FFret=FFret/100, date=as.Date(date)) %>%   filter(date>=\"1960-01-01\", !FFVar==\"RF\") %>%   group_by(FFVar) %>% arrange(FFVar, date) %>%   mutate(FFret=ifelse(date==\"1960-01-01\",1,FFret), FFretv=cumprod(1+FFret)-1) %>%   ggplot(aes(x=date, y=FFretv, col=FFVar, type=FFVar)) + geom_line(lwd=1.2) +   scale_y_log10() +   labs(title=\"FF5 Factors plus Momentum\", subtitle=\"Cumulative wealth plots\",        ylab=\"cum. returns\") +   scale_colour_viridis_d(\"FFvar\") +   theme_bw() + theme(legend.position=\"bottom\") #> Ignoring unknown labels: #> ‚Ä¢ ylab : \"cum. returns\" #> Warning in transformation$transform(x): NaNs wurden erzeugt #> Warning in scale_y_log10(): log-10 transformation introduced infinite values. #> Warning: Removed 11 rows containing missing values or values outside the scale range #> (`geom_line()`)."},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/index.html","id":"output-data-structure","dir":"","previous_headings":"Examples","what":"Output data structure","title":"Download Data from Kenneth French's Website","text":"FFdownload() FFget() return nested list: commonly used sub-table factor files Temp2. Use names(FFdata[[\"x_...\"]]$monthly) discover available sub-table names given dataset.","code":"FFdata ‚îî‚îÄ‚îÄ x_F-F_Research_Data_Factors        # one entry per dataset (x_ prefix avoids R name issues)     ‚îú‚îÄ‚îÄ monthly     ‚îÇ   ‚îú‚îÄ‚îÄ Temp2                       # main factor returns table (unnamed sections ‚Üí TempN)     ‚îÇ   ‚îî‚îÄ‚îÄ ...                         # other sub-tables if present     ‚îú‚îÄ‚îÄ annual     ‚îÇ   ‚îî‚îÄ‚îÄ annual_factors:_january-december     ‚îî‚îÄ‚îÄ daily                           # empty list unless exclude_daily = FALSE"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/index.html","id":"authorlicense","dir":"","previous_headings":"Examples","what":"Author/License","title":"Download Data from Kenneth French's Website","text":"Sebastian St√∂ckl - Package Creator, Modifier & Maintainer - sstoeckl github academic website project licensed MIT License - see license.md file details.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/index.html","id":"acknowledgment","dir":"","previous_headings":"Examples","what":"Acknowledgment","title":"Download Data from Kenneth French's Website","text":"grateful Kenneth French providing great research data website! lives much harder without boost productivity. also grateful kind conversation Kenneth regard package: appreciates work package giving others easier access data sets!","code":""},{"path":[]},{"path":[]},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/other_pckgs.html","id":"frenchdata-nelson-areal-cran-v020","dir":"","previous_headings":"1. Related Packages Overview","what":"frenchdata (Nelson Areal, CRAN v0.2.0)","title":"Comparison with Related Packages & Improvement Suggestions","text":"API style: Multiple focused functions ‚Äî get_french_data_list(), download_french_data(), browse_details_page(), browse_french_site(). Output: Returns data directly R session named list tibbles (one per frequency: monthly, annual, daily). intermediate .RData file required. Dataset discovery: get_french_data_list() returns 297 √ó 3 tibble columns name, file_url, details_url ‚Äî fully browsable via View(). Tidyverse-native: outputs tibbles, column names preserved French‚Äôs headers. Integrates directly dplyr/ggplot2 pipelines without conversion step. One-dataset---time: call download_french_data() downloads processes single named dataset, returning immediately. Breadth exposed: 297 datasets (including international portfolios, industry portfolios, factor variants emerging markets) listed explicitly metadata.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/other_pckgs.html","id":"nmoffrench-enrico-schumann-part-of-nmof","dir":"","previous_headings":"1. Related Packages Overview","what":"NMOF::French() (Enrico Schumann, part of NMOF)","title":"Comparison with Related Packages & Improvement Suggestions","text":"API style: Single function French(dest.dir, dataset, weighting, frequency, price.series, na.rm, adjust.frequency, return.class). Output: Returns data.frame zoo object directly (file save required). Caching: Automatically caches downloaded zip files using YYYYMMDD date prefix dest.dir. Re-uses cached file today‚Äôs file already exists ‚Äî zero-friction reproducibility. Missing value handling: Explicitly replaces French‚Äôs sentinel values (e.g., -99.99, -999) NA. Frequency selection: frequency parameter selects monthly/daily/annual call time, returning single flat data frame ‚Äî nested list navigation. Price series: price.series = TRUE converts returns cumulative wealth indices -function.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/other_pckgs.html","id":"id_2-where-ffdownload-stands-out","dir":"","previous_headings":"","what":"2. Where FFdownload Stands Out","title":"Comparison with Related Packages & Improvement Suggestions","text":"Bulk download: package downloads processes arbitrary number datasets single call, single .RData output. Ideal reproducible research workflows need snapshot many datasets one point time. Separate download processing stages: download=TRUE/download_only=TRUE ‚Üí download=FALSE/download_only=FALSE workflow allows downloading re-processing multiple times without network access. Unique among three packages. Multi-table CSV handling: French‚Äôs CSV files embed multiple sub-tables (e.g., value-weighted returns, equal-weighted returns, number firms, average market cap one file). converter() converter_tbl() correctly split name sub-tables. frenchdata NMOF::French() typically return one sub-table (first/default one), silently discarding rest. xts support: package natively outputs xts time-series objects, essential time-series operations, subsetting date ranges ([\"1963/\"]), merging merge.xts. Dual output format: Supports xts tibble via format parameter, covering legacy modern workflows.","code":""},{"path":[]},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/other_pckgs.html","id":"id_31-dataset-breadth-communication","dir":"","previous_headings":"3. Gaps and Weaknesses vs.¬†Competitors","what":"3.1 Dataset breadth communication","title":"Comparison with Related Packages & Improvement Suggestions","text":"FFdownload scrapes full French data library page can principle access 297+ datasets ‚Äî never communicated user. function return clean, browsable list available datasets metadata (name, description URL). Users must download raw .txt file via listsave= parse . frenchdata exposes proper tibble three columns including details_url per dataset.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/other_pckgs.html","id":"id_32-missing-value-sentinel-handling","dir":"","previous_headings":"3. Gaps and Weaknesses vs.¬†Competitors","what":"3.2 Missing value sentinel handling","title":"Comparison with Related Packages & Improvement Suggestions","text":"French‚Äôs CSV files encode missing observations -99, -999, -99.99 depending dataset. NMOF::French() explicitly converts NA. FFdownload passes numeric values, silently distorting downstream calculations (means, cumulative products, regressions) include sentinel rows.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/other_pckgs.html","id":"id_33-no-direct-return-value","dir":"","previous_headings":"3. Gaps and Weaknesses vs.¬†Competitors","what":"3.3 No direct return value","title":"Comparison with Related Packages & Improvement Suggestions","text":"Every invocation processes data requires writing .RData file disk load()ing back. interactive use piped workflows awkward. frenchdata returns data directly; NMOF::French() returns directly. FFdownload forces round-trip filesystem even user needs one dataset.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/other_pckgs.html","id":"id_34-confusing-boolean-flag-api","dir":"","previous_headings":"3. Gaps and Weaknesses vs.¬†Competitors","what":"3.4 Confusing boolean-flag API","title":"Comparison with Related Packages & Improvement Suggestions","text":"combination download download_only produces four logical states, two redundant meaningless (download=FALSE, download_only=TRUE nothing useful). single largest usability barrier new users generates repeated confusion issues/vignettes.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/other_pckgs.html","id":"id_35-no-caching--freshness-check","dir":"","previous_headings":"3. Gaps and Weaknesses vs.¬†Competitors","what":"3.5 No caching / freshness check","title":"Comparison with Related Packages & Improvement Suggestions","text":"Without tempd, files re-downloaded every call. tempd, files never updated unless user manually deletes . built-mechanism check whether cached file stale (e.g., older N days) compare current file French‚Äôs server. NMOF::French() handles date-prefix scheme.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/other_pckgs.html","id":"id_36-fuzzy-matching-can-silently-select-the-wrong-dataset","dir":"","previous_headings":"3. Gaps and Weaknesses vs.¬†Competitors","what":"3.6 Fuzzy matching can silently select the wrong dataset","title":"Comparison with Related Packages & Improvement Suggestions","text":"adist() always picks closest match threshold warning. user passes \"Momentum\" French renames file, closest match user intended, wrong dataset silently downloaded processed indication. frenchdata requires exact name match, stricter safe.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/other_pckgs.html","id":"id_37-unnamed-sub-tables-temp1-temp2-","dir":"","previous_headings":"3. Gaps and Weaknesses vs.¬†Competitors","what":"3.7 Unnamed sub-tables (Temp1, Temp2, ‚Ä¶)","title":"Comparison with Related Packages & Improvement Suggestions","text":"sub-table CSV header text, named Temp1, Temp2, etc. output. important sub-table factor files (one actual factor returns) nearly always Temp2. Users must discover trial error. naming convention mentioned nowhere documentation except implicitly examples.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/other_pckgs.html","id":"id_38-deep-nesting-makes-interactive-use-painful","dir":"","previous_headings":"3. Gaps and Weaknesses vs.¬†Competitors","what":"3.8 Deep nesting makes interactive use painful","title":"Comparison with Related Packages & Improvement Suggestions","text":"Accessing monthly factor returns requires: FFdata[[\"x_F-F_Research_Data_Factors\"]]$monthly$Temp2. x_ prefix (needed R list names start digit hyphen) Temp2 sub-table name non-obvious. Competitor packages return flat shallowly nested structure.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/other_pckgs.html","id":"id_39-plyr-dependency","dir":"","previous_headings":"3. Gaps and Weaknesses vs.¬†Competitors","what":"3.9 plyr dependency","title":"Comparison with Related Packages & Improvement Suggestions","text":"plyr effectively superseded purrr base R‚Äôs lapply family longer actively developed. presence triggers CRAN notes configurations may cause future compatibility issues. plyr usage package plyr::mlply() iterating CSV files.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/other_pckgs.html","id":"id_310-http-not-https","dir":"","previous_headings":"3. Gaps and Weaknesses vs.¬†Competitors","what":"3.10 HTTP (not HTTPS)","title":"Comparison with Related Packages & Improvement Suggestions","text":"base URL used http://mba.tuck.dartmouth.edu/.... French website available HTTPS. Using HTTP may trigger certificate-related warnings systems fail server enforces HTTPS-future.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/other_pckgs.html","id":"id_4-improvement-suggestions-backward-compatible","dir":"","previous_headings":"","what":"4. Improvement Suggestions (Backward-Compatible)","title":"Comparison with Related Packages & Improvement Suggestions","text":"suggestions additive. introduce new functions new optional parameters default values preserve existing behaviour exactly.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/other_pckgs.html","id":"id_41-add-fflist-a-proper-dataset-discovery-function","dir":"","previous_headings":"4. Improvement Suggestions (Backward-Compatible)","what":"4.1 Add FFlist(): a proper dataset discovery function","title":"Comparison with Related Packages & Improvement Suggestions","text":"Problem addressed: ¬ß3.1 Change: Export new function returns dataset inventory tibble. replaces listsave workaround. result immediately usable dplyr::filter() View(). existing code affected.","code":"FFlist <- function(exclude_daily = TRUE) {   # scrapes French's page (same logic as step 1 of FFdownload)   # returns a tibble with columns: name, file_url, details_url }"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/other_pckgs.html","id":"id_42-add-na_values-parameter-to-ffdownload-for-sentinel-replacement","dir":"","previous_headings":"4. Improvement Suggestions (Backward-Compatible)","what":"4.2 Add na_values parameter to FFdownload() for sentinel replacement","title":"Comparison with Related Packages & Improvement Suggestions","text":"Problem addressed: ¬ß3.2 Change: Add optional na_values parameter defaulting NULL (preserves current behaviour). set numeric vector (e.g., c(-99, -999, -99.99)), converter() / converter_tbl() replaces values NA parsing sub-table. default NULL, existing scripts continue work unchanged.","code":"FFdownload(..., na_values = NULL) # Suggested safe default for new users: FFdownload(..., na_values = c(-99, -999, -99.99, -999.0))"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/other_pckgs.html","id":"id_43-add-return_data-parameter-to-return-the-list-directly","dir":"","previous_headings":"4. Improvement Suggestions (Backward-Compatible)","what":"4.3 Add return_data parameter to return the list directly","title":"Comparison with Related Packages & Improvement Suggestions","text":"Problem addressed: ¬ß3.3 Change: Add return_data = FALSE parameter. TRUE, FFdownload() returns FFdata list invisibly addition (instead ) saving . Default FALSE, save--load pattern unchanged. TRUE output_file NULL tempfile(), file needs written.","code":"FFdownload(..., return_data = FALSE) # New usage: FFdata <- FFdownload(inputlist = \"F-F_Research_Data_Factors\", return_data = TRUE)"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/other_pckgs.html","id":"id_44-replace-download--download_only-flags-with-a-action-parameter","dir":"","previous_headings":"4. Improvement Suggestions (Backward-Compatible)","what":"4.4 Replace download + download_only flags with a action parameter","title":"Comparison with Related Packages & Improvement Suggestions","text":"Problem addressed: ¬ß3.4 Change: Add new action parameter cleaner alternative. Keep download download_only fully functional backward compatibility. action missing, old download/download_only logic runs .","code":"# New parameter (if provided, overrides download/download_only): action = c(\"all\", \"list_only\", \"download_only\", \"process_only\")"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/other_pckgs.html","id":"id_45-add-date-based-caching-to-tempd","dir":"","previous_headings":"4. Improvement Suggestions (Backward-Compatible)","what":"4.5 Add date-based caching to tempd","title":"Comparison with Related Packages & Improvement Suggestions","text":"Problem addressed: ¬ß3.5 Change: Add cache_days parameter (default Inf, meaning never re-download file exists ‚Äî current behaviour). set positive integer, files older cache_days tempd re-downloaded. requires file.info()$mtime check per zip file downloading. Default preserves current behaviour.","code":"FFdownload(..., cache_days = Inf) # Example: re-download if cached file is older than 7 days FFdownload(..., tempd = \"data/ff\", cache_days = 7)"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/other_pckgs.html","id":"id_46-add-fuzzy-match-warning-and-a-match_threshold-parameter","dir":"","previous_headings":"4. Improvement Suggestions (Backward-Compatible)","what":"4.6 Add fuzzy-match warning and a match_threshold parameter","title":"Comparison with Related Packages & Improvement Suggestions","text":"Problem addressed: ¬ß3.6 Change: adist() matching, compute relative edit distance. exceeds threshold, emit warning() listing matched name alongside requested name. Additionally, expose helper:","code":"FFdownload(..., match_threshold = 0.3) # If edit_distance / nchar(matched_name) > match_threshold ‚Üí warning FFmatch(inputlist, exclude_daily = TRUE) # Returns a tibble showing: requested_name ‚Üí matched_file, edit_distance, similarity # Lets users verify matches before downloading"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/other_pckgs.html","id":"id_47-name-temp-sub-tables-more-informatively","dir":"","previous_headings":"4. Improvement Suggestions (Backward-Compatible)","what":"4.7 Name Temp sub-tables more informatively","title":"Comparison with Related Packages & Improvement Suggestions","text":"Problem addressed: ¬ß3.7 Change: sub-table section explicit header, inspect column names parsed data use generate descriptive fallback name rather Temp1, Temp2, etc. example, columns Mkt.RF, SMB, HML, RF, name sub-table \"factors\". heuristic possible, keep TempN fallback. Alternatively (simpler fully backward-compatible): add verbose_names = FALSE parameter. TRUE, converter() logs message mapping TempN line range first column names, helping users understand structure without changing output names.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/other_pckgs.html","id":"id_48-add-ffget-single-dataset-convenience-wrapper","dir":"","previous_headings":"4. Improvement Suggestions (Backward-Compatible)","what":"4.8 Add FFget(): single-dataset convenience wrapper","title":"Comparison with Related Packages & Improvement Suggestions","text":"Problem addressed: ¬ß3.3, ¬ß3.8 Change: Export thin wrapper downloads returns one dataset directly, mimicking frenchdata::download_french_data() spirit using FFdownload‚Äôs full parsing engine (including sub-tables). Example usage: single biggest usability improvement new interactive users. modify FFdownload() .","code":"FFget <- function(name, frequency = \"monthly\", subtable = NULL,                   exclude_daily = TRUE, na_values = c(-99, -999, -99.99),                   format = \"tbl\") {   # calls FFdownload() internally with return_data = TRUE   # extracts FFdata[[paste0(\"x_\", name)]][[frequency]]   # if subtable is NULL, returns all sub-tables as a named list   # if subtable is a string, returns that one tibble/xts directly } factors <- FFget(\"F-F_Research_Data_Factors\", subtable = \"Temp2\")"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/other_pckgs.html","id":"id_49-replace-plyrmlply-with-base-lapply","dir":"","previous_headings":"4. Improvement Suggestions (Backward-Compatible)","what":"4.9 Replace plyr::mlply() with base lapply()","title":"Comparison with Related Packages & Improvement Suggestions","text":"Problem addressed: ¬ß3.9 Change: Replace one plyr call FFdownload.R: plyr package can dropped Depends. progress reporting wanted, use cli::cli_progress_along() progressr package (lightweight CRAN-stable). reduces dependency footprint removes deprecated package Depends field (currently sits, meaning attached user‚Äôs search path).","code":"# Current: FFdata <- plyr::mlply(function(y) converter(y), .data = csv_files, .progress = \"text\")  # Replacement (with optional progress via cli or progressr): FFdata <- lapply(csv_files, converter)"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/other_pckgs.html","id":"id_410-switch-to-https","dir":"","previous_headings":"4. Improvement Suggestions (Backward-Compatible)","what":"4.10 Switch to HTTPS","title":"Comparison with Related Packages & Improvement Suggestions","text":"Problem addressed: ¬ß3.10 Change: Replace hard-coded base URL: similarly download URLs. One-line change, zero API impact.","code":"# Current: URL <- \"http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library.html\"  # Fixed: URL <- \"https://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library.html\""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/other_pckgs.html","id":"id_411-document-the-sub-table-naming-convention-explicitly","dir":"","previous_headings":"4. Improvement Suggestions (Backward-Compatible)","what":"4.11 Document the sub-table naming convention explicitly","title":"Comparison with Related Packages & Improvement Suggestions","text":"Problem addressed: ¬ß3.7, ¬ß3.8 Change (documentation , code): Add dedicated section main FFdownload() man page xts vignette explaining: - list element names x_ prefix. - Temp1, Temp2, etc. mean discover sub-table (names(FFdata[[\"x_...\"]]$monthly)). - reference table showing common datasets primary sub-table name (e.g., factor files ‚Üí Temp2, portfolio files ‚Üí average_value_weighted_returns).","code":""},{"path":[]},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/reference/FFdownload.html","id":null,"dir":"Reference","previous_headings":"","what":"Downloads Datasets from Kenneth French's Website ‚Äî FFdownload","title":"Downloads Datasets from Kenneth French's Website ‚Äî FFdownload","text":"FFdownload returns RData file (possibility exclude large daily) datasets Kenneth French's Website. help researchers work datasets update regularly. Allows reproducible research. aware processing (especially including daily files) takes quite long time!","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/reference/FFdownload.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Downloads Datasets from Kenneth French's Website ‚Äî FFdownload","text":"","code":"FFdownload(   output_file = \"data.Rdata\",   tempd = NULL,   exclude_daily = FALSE,   download = TRUE,   download_only = FALSE,   listsave = NULL,   inputlist = NULL,   format = \"xts\",   na_values = NULL,   return_data = FALSE,   action = NULL,   cache_days = Inf,   match_threshold = 0.3 )"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/reference/FFdownload.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Downloads Datasets from Kenneth French's Website ‚Äî FFdownload","text":"output_file name .RData file saved (include path necessary) tempd specify want keep downloaded files somewhere save. Seems necessary reproducible research files website change time time exclude_daily excludes daily datasets (downloaded) ==> speeds process considerably download set TRUE actually want download . set false specify tempd keep processing already downloaded files download_only set FALSE want process downloaded files listsave NULL, list unzipped files saved (good processing limited number files inputlist). written inputlist processed. inputlist NULL, FFdownload tries match names list list zip-files format (set xts) specify \"xts\" \"tbl\"/\"tibble\" output format nested lists na_values numeric vector sentinel values replace NA (e.g. c(-99, -999, -99.99)). French's files use -99.99 -999 denote missing observations. Default NULL preserves original behaviour (replacement). return_data logical. TRUE, FFdata list returned invisibly addition saved output_file. Default FALSE preserves original behaviour. action convenience alternative download/download_only flag pair. One \"\" (download + process), \"list_only\" (save file list ), \"download_only\" (download process), \"process_only\" (process already-downloaded files tempd). action provided overrides download download_only. Default NULL retains original flag-based behaviour. cache_days numeric. greater 0 less Inf, zip files already present tempd younger cache_days days reused instead re-downloaded. Default Inf preserves original behaviour (never re-download existing file). match_threshold numeric [0,1]. similarity requested inputlist entry fuzzy-matched filename threshold warning emitted. Use FFmatch() inspect matches downloading. Default 0.3.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/reference/FFdownload.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Downloads Datasets from Kenneth French's Website ‚Äî FFdownload","text":"Invisibly returns FFdata list return_data = TRUE; otherwise called side-effect writing RData file.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/reference/FFdownload.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Downloads Datasets from Kenneth French's Website ‚Äî FFdownload","text":"","code":"if (FALSE) { # \\dontrun{ tempf <- tempfile(fileext = \".RData\"); outd <- paste0(tempdir(),\"/\",format(Sys.time(), \"%F_%H-%M\")) temptxt <- tempfile(fileext = \".txt\")  # Example 1: Use FFdownload to get a list of all monthly zip-files. Save that list as temptxt.  FFdownload(exclude_daily=TRUE,download=FALSE,download_only=TRUE,listsave=temptxt) read.delim(temptxt,sep = \",\") # set vector with only files to download (we try a fuzzyjoin, so \"Momentum\" should be enough to get # the Momentum Factor) inputlist <- c(\"Research_Data_Factors\",\"Momentum_Factor\",\"ST_Reversal_Factor\",\"LT_Reversal_Factor\") # Now process only these files if they can be matched (download only) FFdownload(exclude_daily=FALSE,tempd=outd,download=TRUE,download_only=FALSE, inputlist=inputlist,output_file = tempf) list.files(outd) # Then process all the downloaded files FFdownload(output_file = tempf, exclude_daily=TRUE,tempd=outd,download=FALSE, download_only=FALSE,inputlist=inputlist) load(tempf); FFdata$`x_F-F_Momentum_Factor`$monthly$Temp2[1:10]  # Example 2: Use action parameter and return data directly  FFdata <- FFdownload(   inputlist = c(\"F-F_Research_Data_5_Factors_2x3\"),   output_file = tempf,   action = \"all\",   na_values = c(-99, -999, -99.99),   return_data = TRUE ) FFdata$`x_F-F_Research_Data_5_Factors_2x3`$monthly$Temp2 } # }"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/reference/FFget.html","id":null,"dir":"Reference","previous_headings":"","what":"Download and return a single French dataset directly ‚Äî FFget","title":"Download and return a single French dataset directly ‚Äî FFget","text":"FFget convenience wrapper around FFdownload downloads one named dataset returns directly R session ‚Äî intermediate .RData file, load() call required. function uses FFdownload's parsing engine, every sub-table present original CSV (value-weighted returns, equal-weighted returns, number firms, etc.) available returned list.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/reference/FFget.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download and return a single French dataset directly ‚Äî FFget","text":"","code":"FFget(   name,   frequency = \"monthly\",   subtable = NULL,   exclude_daily = TRUE,   na_values = c(-99, -999, -99.99),   format = \"tbl\" )"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/reference/FFget.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download and return a single French dataset directly ‚Äî FFget","text":"name character. dataset name appears FFlist()$name, e.g. \"F-F_Research_Data_Factors\" \"F-F_Momentum_Factor\". Fuzzy matching applied, partial names work (check FFmatch first). frequency character. frequency sub-list extract.  One \"monthly\" (default), \"annual\", \"daily\".  Set NULL return three frequencies named list. subtable character. Name sub-table within chosen frequency, e.g. \"Temp2\" \"annual_factors:_january-december\".  Set NULL (default) return sub-tables named list. exclude_daily logical. Passed FFdownload. Default TRUE. na_values numeric vector sentinel values replace NA. Defaults c(-99, -999, -99.99) ‚Äî values French uses missing observations.  Set NULL disable replacement. format character. \"tbl\" (default) \"xts\".","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/reference/FFget.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download and return a single French dataset directly ‚Äî FFget","text":"tibble, xts object, named list, depending frequency, subtable, format.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/reference/FFget.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Download and return a single French dataset directly ‚Äî FFget","text":"","code":"if (FALSE) { # \\dontrun{ # Get the main monthly Fama-French 3-factor table directly as a tibble ff3 <- FFget(\"F-F_Research_Data_Factors\", subtable = \"Temp2\") head(ff3)  # Get all sub-tables for the 5-factor model ff5_all <- FFget(\"F-F_Research_Data_5_Factors_2x3\", subtable = NULL) names(ff5_all)  # Get annual data as xts ff3_ann <- FFget(\"F-F_Research_Data_Factors\", frequency = \"annual\", format = \"xts\") } # }"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/reference/FFlist.html","id":null,"dir":"Reference","previous_headings":"","what":"List available datasets on Kenneth French's website ‚Äî FFlist","title":"List available datasets on Kenneth French's website ‚Äî FFlist","text":"FFlist scrapes Kenneth French's data library returns data frame (tibble) available datasets names download URLs. replaces listsave workaround FFdownload makes dataset inventory directly usable dplyr::filter() View().","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/reference/FFlist.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"List available datasets on Kenneth French's website ‚Äî FFlist","text":"","code":"FFlist(exclude_daily = TRUE)"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/reference/FFlist.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"List available datasets on Kenneth French's website ‚Äî FFlist","text":"exclude_daily logical. TRUE (default), daily datasets excluded returned list.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/reference/FFlist.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"List available datasets on Kenneth French's website ‚Äî FFlist","text":"data frame (tibble tibble package available) columns: name Dataset name, used inputlist key     FFdata list (without leading x_ prefix without     _CSV.zip suffix). file_url Full HTTPS URL zip file. is_daily Logical flag indicating whether dataset contains daily data.     present exclude_daily = FALSE.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/reference/FFlist.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"List available datasets on Kenneth French's website ‚Äî FFlist","text":"","code":"if (FALSE) { # \\dontrun{ # Browse all available monthly/annual datasets fl <- FFlist() head(fl, 10)  # Include daily datasets FFlist(exclude_daily = FALSE)  # Filter with dplyr library(dplyr) FFlist() |> filter(grepl(\"Momentum\", name)) } # }"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/reference/FFmatch.html","id":null,"dir":"Reference","previous_headings":"","what":"Preview fuzzy-matching results before downloading ‚Äî FFmatch","title":"Preview fuzzy-matching results before downloading ‚Äî FFmatch","text":"FFmatch shows entry inputlist matched available dataset fuzzy-matching logic inside FFdownload.  Use verify matches triggering download, especially dataset names abbreviated partially specified.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/reference/FFmatch.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Preview fuzzy-matching results before downloading ‚Äî FFmatch","text":"","code":"FFmatch(inputlist, exclude_daily = TRUE)"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/reference/FFmatch.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Preview fuzzy-matching results before downloading ‚Äî FFmatch","text":"inputlist character vector (partial) dataset names match, pass inputlist argument FFdownload. exclude_daily logical. TRUE (default), daily datasets excluded candidate pool.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/reference/FFmatch.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Preview fuzzy-matching results before downloading ‚Äî FFmatch","text":"data frame (tibble) one row per entry inputlist columns: requested input string supplied. matched dataset name selected FFdownload. edit_distance Raw Levenshtein edit distance requested     matched. similarity 1 - edit_distance / nchar(matched), clamped [0, 1].     Values 0.3 suggest potentially wrong match.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/reference/FFmatch.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Preview fuzzy-matching results before downloading ‚Äî FFmatch","text":"","code":"if (FALSE) { # \\dontrun{ FFmatch(c(\"Research_Data_Factors\", \"Momentum\", \"ST_Reversal\")) } # }"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/reference/converter.html","id":null,"dir":"Reference","previous_headings":"","what":"Converter to read downloaded datasets and automatically put them into one large dataframe with xts ‚Äî converter","title":"Converter to read downloaded datasets and automatically put them into one large dataframe with xts ‚Äî converter","text":"converter read/clean/write","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/reference/converter.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Converter to read downloaded datasets and automatically put them into one large dataframe with xts ‚Äî converter","text":"","code":"converter(file, na_values = NULL)"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/reference/converter.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Converter to read downloaded datasets and automatically put them into one large dataframe with xts ‚Äî converter","text":"file downloaded dataset na_values numeric vector sentinel values replace NA parsing. Default NULL performs replacement (original behaviour).","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/reference/converter.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Converter to read downloaded datasets and automatically put them into one large dataframe with xts ‚Äî converter","text":"list annual/monthly/daily files","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/reference/converter_tbl.html","id":null,"dir":"Reference","previous_headings":"","what":"Converter to read downloaded datasets and automatically put them into one large dataframe as tibbles ‚Äî converter_tbl","title":"Converter to read downloaded datasets and automatically put them into one large dataframe as tibbles ‚Äî converter_tbl","text":"converter_tbl read/clean/write","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/reference/converter_tbl.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Converter to read downloaded datasets and automatically put them into one large dataframe as tibbles ‚Äî converter_tbl","text":"","code":"converter_tbl(file, na_values = NULL)"},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/reference/converter_tbl.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Converter to read downloaded datasets and automatically put them into one large dataframe as tibbles ‚Äî converter_tbl","text":"file downloaded dataset na_values numeric vector sentinel values replace NA parsing. Default NULL performs replacement (original behaviour).","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/reference/converter_tbl.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Converter to read downloaded datasets and automatically put them into one large dataframe as tibbles ‚Äî converter_tbl","text":"list annual/monthly/daily files","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/news/index.html","id":"ffdownload-111","dir":"Changelog","previous_headings":"","what":"FFdownload 1.1.1","title":"FFdownload 1.1.1","text":"CRAN release: 2023-10-12 Release CRAN previous package version archived due broken travis link.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/news/index.html","id":"ffdownload-11","dir":"Changelog","previous_headings":"","what":"FFdownload 1.1","title":"FFdownload 1.1","text":"Resubmit CRAN Added possibility create list tibbles rather list xts. Also added appropriate vignettes.","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/news/index.html","id":"ffdownload-106","dir":"Changelog","previous_headings":"","what":"FFdownload 1.0.6","title":"FFdownload 1.0.6","text":"CRAN release: 2021-05-27 Resubmit CRAN Corrected variable names similar corresponding command (FFdownload -> FFdata, tempdir -> tempd). potentially breaking change, additionally included warning message package loaded. Also corrected date converter annual data Dec year. Additionally fixed download/download_only problem now working","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/news/index.html","id":"ffdownload-105","dir":"Changelog","previous_headings":"","what":"FFdownload 1.0.5","title":"FFdownload 1.0.5","text":"CRAN release: 2020-10-29 Resubmit CRAN Fixed long line commented example","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/news/index.html","id":"ffdownload-104","dir":"Changelog","previous_headings":"","what":"FFdownload 1.0.4","title":"FFdownload 1.0.4","text":"Resubmit CRAN wraped examples download donttest{} cran tests anyway (see https://stackoverflow.com/questions/63693563/issues--r-package--cran-asked--replace-dontrun--donttest) also commented second example takes time (dontrun() seems also liked cran)","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/news/index.html","id":"ffdownload-103","dir":"Changelog","previous_headings":"","what":"FFdownload 1.0.3","title":"FFdownload 1.0.3","text":"Resubmit CRAN","code":""},{"path":"https://www.sebastianstoeckl.com/ffdownload/dev/news/index.html","id":"ffdownload-102","dir":"Changelog","previous_headings":"","what":"FFdownload 1.0.2","title":"FFdownload 1.0.2","text":"Added NEWS.md file track changes package. Added slight changes suggested CRAN","code":""}]
