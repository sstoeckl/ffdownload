<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Comparison with Related Packages &amp; Improvement Suggestions • FFdownload</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"><link rel="icon" sizes="any" href="favicon.ico"><link rel="manifest" href="site.webmanifest"><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Comparison with Related Packages &amp; Improvement Suggestions"><meta property="og:image" content="https://www.sebastianstoeckl.com/ffdownload/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">FFdownload</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.1.99</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="articles/assetpricing.html">Cross-Sectional Asset Pricing Example</a></li>
    <li><a class="dropdown-item" href="articles/FFD-tibble-how-to.html">How-to in the Tidyverse</a></li>
    <li><a class="dropdown-item" href="articles/FFD-xts-how-to.html">How-to xts</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sstoeckl/ffdownload/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="logo.png" class="logo" alt=""><h1>Comparison with Related Packages &amp; Improvement Suggestions</h1>
      <small class="dont-index">Source: <a href="https://github.com/sstoeckl/ffdownload/blob/master/other_pckgs.md" class="external-link"><code>other_pckgs.md</code></a></small>
    </div>

<div id="comparison-with-related-packages--improvement-suggestions" class="section level1">

<div class="section level2">
<h2 id="id_1-related-packages-overview">1. Related Packages Overview<a class="anchor" aria-label="anchor" href="#id_1-related-packages-overview"></a></h2>
<div class="section level3">
<h3 id="frenchdata-nelson-areal-cran-v020">
<code>frenchdata</code> (Nelson Areal, CRAN v0.2.0)<a class="anchor" aria-label="anchor" href="#frenchdata-nelson-areal-cran-v020"></a></h3>
<ul><li>
<strong>API style</strong>: Multiple focused functions — <code>get_french_data_list()</code>, <code>download_french_data()</code>, <code>browse_details_page()</code>, <code>browse_french_site()</code>.</li>
<li>
<strong>Output</strong>: Returns data directly into the R session as a named list of tibbles (one per frequency: <code>monthly</code>, <code>annual</code>, <code>daily</code>). No intermediate <code>.RData</code> file required.</li>
<li>
<strong>Dataset discovery</strong>: <code>get_french_data_list()</code> returns a <code>297 × 3</code> tibble with columns <code>name</code>, <code>file_url</code>, and <code>details_url</code> — fully browsable via <code><a href="https://rdrr.io/r/utils/View.html" class="external-link">View()</a></code>.</li>
<li>
<strong>Tidyverse-native</strong>: All outputs are tibbles, column names preserved from French’s headers. Integrates directly into dplyr/ggplot2 pipelines without any conversion step.</li>
<li>
<strong>One-dataset-at-a-time</strong>: Each call to <code>download_french_data()</code> downloads and processes a single named dataset, returning it immediately.</li>
<li>
<strong>Breadth exposed</strong>: All 297 datasets (including international portfolios, industry portfolios, factor variants for emerging markets) are listed explicitly with metadata.</li>
</ul></div>
<div class="section level3">
<h3 id="nmoffrench-enrico-schumann-part-of-nmof">
<code>NMOF::French()</code> (Enrico Schumann, part of NMOF)<a class="anchor" aria-label="anchor" href="#nmoffrench-enrico-schumann-part-of-nmof"></a></h3>
<ul><li>
<strong>API style</strong>: Single function <code>French(dest.dir, dataset, weighting, frequency, price.series, na.rm, adjust.frequency, return.class)</code>.</li>
<li>
<strong>Output</strong>: Returns a <code>data.frame</code> or <code>zoo</code> object directly (no file save required).</li>
<li>
<strong>Caching</strong>: Automatically caches downloaded zip files using a <code>YYYYMMDD</code> date prefix in <code>dest.dir</code>. Re-uses the cached file if today’s file already exists — zero-friction reproducibility.</li>
<li>
<strong>Missing value handling</strong>: Explicitly replaces French’s sentinel values (e.g., <code>-99.99</code>, <code>-999</code>) with <code>NA</code>.</li>
<li>
<strong>Frequency selection</strong>: The <code>frequency</code> parameter selects monthly/daily/annual at call time, returning a single flat data frame — no nested list navigation.</li>
<li>
<strong>Price series</strong>: <code>price.series = TRUE</code> converts returns to cumulative wealth indices in-function.</li>
</ul><hr></div>
</div>
<div class="section level2">
<h2 id="id_2-where-ffdownload-stands-out">2. Where FFdownload Stands Out<a class="anchor" aria-label="anchor" href="#id_2-where-ffdownload-stands-out"></a></h2>
<ul><li>
<strong>Bulk download</strong>: The only package that downloads and processes an arbitrary number of datasets in a single call, with a single <code>.RData</code> output. Ideal for reproducible research workflows that need a snapshot of many datasets at one point in time.</li>
<li>
<strong>Separate download and processing stages</strong>: The <code>download=TRUE/download_only=TRUE</code> → <code>download=FALSE/download_only=FALSE</code> workflow allows downloading once and re-processing multiple times without network access. Unique among the three packages.</li>
<li>
<strong>Multi-table CSV handling</strong>: French’s CSV files embed multiple sub-tables (e.g., value-weighted returns, equal-weighted returns, number of firms, average market cap all in one file). Both <code><a href="reference/converter.html">converter()</a></code> and <code><a href="reference/converter_tbl.html">converter_tbl()</a></code> correctly split and name all sub-tables. <code>frenchdata</code> and <code>NMOF::French()</code> typically return only one sub-table (the first/default one), silently discarding the rest.</li>
<li>
<strong>xts support</strong>: The only package that natively outputs <code>xts</code> time-series objects, which are essential for time-series operations, subsetting by date ranges (<code>["1963/"]</code>), and merging with <code>merge.xts</code>.</li>
<li>
<strong>Dual output format</strong>: Supports both <code>xts</code> and tibble via the <code>format</code> parameter, covering both legacy and modern workflows.</li>
</ul><hr></div>
<div class="section level2">
<h2 id="id_3-gaps-and-weaknesses-vs-competitors">3. Gaps and Weaknesses vs. Competitors<a class="anchor" aria-label="anchor" href="#id_3-gaps-and-weaknesses-vs-competitors"></a></h2>
<div class="section level3">
<h3 id="id_31-dataset-breadth-communication">3.1 Dataset breadth communication<a class="anchor" aria-label="anchor" href="#id_31-dataset-breadth-communication"></a></h3>
<p>FFdownload scrapes the full French data library page and can in principle access all 297+ datasets — but this is never communicated to the user. There is no function to return a clean, browsable list of available datasets with metadata (name, description URL). Users must download a raw <code>.txt</code> file via <code>listsave=</code> and then parse it themselves. <code>frenchdata</code> exposes this as a proper tibble with three columns including a <code>details_url</code> per dataset.</p>
</div>
<div class="section level3">
<h3 id="id_32-missing-value-sentinel-handling">3.2 Missing value sentinel handling<a class="anchor" aria-label="anchor" href="#id_32-missing-value-sentinel-handling"></a></h3>
<p>French’s CSV files encode missing observations as <code>-99</code>, <code>-999</code>, or <code>-99.99</code> depending on the dataset. <code>NMOF::French()</code> explicitly converts these to <code>NA</code>. FFdownload passes them through as numeric values, silently distorting any downstream calculations (means, cumulative products, regressions) that include these sentinel rows.</p>
</div>
<div class="section level3">
<h3 id="id_33-no-direct-return-value">3.3 No direct return value<a class="anchor" aria-label="anchor" href="#id_33-no-direct-return-value"></a></h3>
<p>Every invocation that processes data requires writing an <code>.RData</code> file to disk and <code><a href="https://rdrr.io/r/base/load.html" class="external-link">load()</a></code>ing it back. For interactive use and piped workflows this is awkward. <code>frenchdata</code> returns the data directly; <code>NMOF::French()</code> returns it directly. FFdownload forces a round-trip through the filesystem even when the user only needs one dataset.</p>
</div>
<div class="section level3">
<h3 id="id_34-confusing-boolean-flag-api">3.4 Confusing boolean-flag API<a class="anchor" aria-label="anchor" href="#id_34-confusing-boolean-flag-api"></a></h3>
<p>The combination of <code>download</code> and <code>download_only</code> produces four logical states, two of which are redundant or meaningless (<code>download=FALSE, download_only=TRUE</code> does nothing useful). This is the single largest usability barrier for new users and generates repeated confusion in issues/vignettes.</p>
</div>
<div class="section level3">
<h3 id="id_35-no-caching--freshness-check">3.5 No caching / freshness check<a class="anchor" aria-label="anchor" href="#id_35-no-caching--freshness-check"></a></h3>
<p>Without <code>tempd</code>, files are re-downloaded every call. With <code>tempd</code>, files are never updated unless the user manually deletes them. There is no built-in mechanism to check whether a cached file is stale (e.g., older than N days) or to compare it against the current file on French’s server. <code>NMOF::French()</code> handles this with a date-prefix scheme.</p>
</div>
<div class="section level3">
<h3 id="id_36-fuzzy-matching-can-silently-select-the-wrong-dataset">3.6 Fuzzy matching can silently select the wrong dataset<a class="anchor" aria-label="anchor" href="#id_36-fuzzy-matching-can-silently-select-the-wrong-dataset"></a></h3>
<p><code><a href="https://rdrr.io/r/utils/adist.html" class="external-link">adist()</a></code> always picks the closest match with no threshold and no warning. If a user passes <code>"Momentum"</code> and French renames a file, or the closest match is not what the user intended, the wrong dataset is silently downloaded and processed with no indication. <code>frenchdata</code> requires an exact name match, which is stricter but safe.</p>
</div>
<div class="section level3">
<h3 id="id_37-unnamed-sub-tables-temp1-temp2-">3.7 Unnamed sub-tables (<code>Temp1</code>, <code>Temp2</code>, …)<a class="anchor" aria-label="anchor" href="#id_37-unnamed-sub-tables-temp1-temp2-"></a></h3>
<p>When a sub-table in a CSV has no header text, it is named <code>Temp1</code>, <code>Temp2</code>, etc. in the output. The most important sub-table in factor files (the one with actual factor returns) is nearly always <code>Temp2</code>. Users must discover this through trial and error. The naming convention is mentioned nowhere in the documentation except implicitly in examples.</p>
</div>
<div class="section level3">
<h3 id="id_38-deep-nesting-makes-interactive-use-painful">3.8 Deep nesting makes interactive use painful<a class="anchor" aria-label="anchor" href="#id_38-deep-nesting-makes-interactive-use-painful"></a></h3>
<p>Accessing monthly factor returns requires: <code>FFdata[["x_F-F_Research_Data_Factors"]]$monthly$Temp2</code>. The <code>x_</code> prefix (needed because R list names cannot start with a digit or hyphen) and the <code>Temp2</code> sub-table name are non-obvious. Competitor packages return a flat or shallowly nested structure.</p>
</div>
<div class="section level3">
<h3 id="id_39-plyr-dependency">3.9 <code>plyr</code> dependency<a class="anchor" aria-label="anchor" href="#id_39-plyr-dependency"></a></h3>
<p><code>plyr</code> is effectively superseded by <code>purrr</code> and base R’s <code>lapply</code> family and is no longer actively developed. Its presence triggers CRAN notes in some configurations and may cause future compatibility issues. The only <code>plyr</code> usage in the package is <code><a href="https://rdrr.io/pkg/plyr/man/mlply.html" class="external-link">plyr::mlply()</a></code> for iterating over CSV files.</p>
</div>
<div class="section level3">
<h3 id="id_310-http-not-https">3.10 HTTP (not HTTPS)<a class="anchor" aria-label="anchor" href="#id_310-http-not-https"></a></h3>
<p>The base URL used is <code>http://mba.tuck.dartmouth.edu/...</code>. The French website is available over HTTPS. Using HTTP may trigger certificate-related warnings on some systems and will fail if the server enforces HTTPS-only in future.</p>
<hr></div>
</div>
<div class="section level2">
<h2 id="id_4-improvement-suggestions-backward-compatible">4. Improvement Suggestions (Backward-Compatible)<a class="anchor" aria-label="anchor" href="#id_4-improvement-suggestions-backward-compatible"></a></h2>
<p>All suggestions below are additive. They introduce new functions or new optional parameters with default values that preserve existing behaviour exactly.</p>
<hr><div class="section level3">
<h3 id="id_41-add-fflist-a-proper-dataset-discovery-function">4.1 Add <code>FFlist()</code>: a proper dataset discovery function<a class="anchor" aria-label="anchor" href="#id_41-add-fflist-a-proper-dataset-discovery-function"></a></h3>
<p><strong>Problem addressed</strong>: §3.1 <strong>Change</strong>: Export a new function that returns the dataset inventory as a tibble.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">FFlist</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">exclude_daily</span> <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># scrapes French's page (same logic as step 1 of FFdownload)</span></span>
<span>  <span class="co"># returns a tibble with columns: name, file_url, details_url</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>This replaces the <code>listsave</code> workaround. The result is immediately usable with <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">dplyr::filter()</a></code> and <code><a href="https://rdrr.io/r/utils/View.html" class="external-link">View()</a></code>. No existing code is affected.</p>
<hr></div>
<div class="section level3">
<h3 id="id_42-add-na_values-parameter-to-ffdownload-for-sentinel-replacement">4.2 Add <code>na_values</code> parameter to <code>FFdownload()</code> for sentinel replacement<a class="anchor" aria-label="anchor" href="#id_42-add-na_values-parameter-to-ffdownload-for-sentinel-replacement"></a></h3>
<p><strong>Problem addressed</strong>: §3.2 <strong>Change</strong>: Add an optional <code>na_values</code> parameter defaulting to <code>NULL</code> (preserves current behaviour). When set to a numeric vector (e.g., <code>c(-99, -999, -99.99)</code>), <code><a href="reference/converter.html">converter()</a></code> / <code><a href="reference/converter_tbl.html">converter_tbl()</a></code> replaces these values with <code>NA</code> after parsing each sub-table.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/FFdownload.html">FFdownload</a></span><span class="op">(</span><span class="va">...</span>, na_values <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="co"># Suggested safe default for new users:</span></span>
<span><span class="fu"><a href="reference/FFdownload.html">FFdownload</a></span><span class="op">(</span><span class="va">...</span>, na_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">99</span>, <span class="op">-</span><span class="fl">999</span>, <span class="op">-</span><span class="fl">99.99</span>, <span class="op">-</span><span class="fl">999.0</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Because the default is <code>NULL</code>, all existing scripts continue to work unchanged.</p>
<hr></div>
<div class="section level3">
<h3 id="id_43-add-return_data-parameter-to-return-the-list-directly">4.3 Add <code>return_data</code> parameter to return the list directly<a class="anchor" aria-label="anchor" href="#id_43-add-return_data-parameter-to-return-the-list-directly"></a></h3>
<p><strong>Problem addressed</strong>: §3.3 <strong>Change</strong>: Add <code>return_data = FALSE</code> parameter. When <code>TRUE</code>, <code><a href="reference/FFdownload.html">FFdownload()</a></code> returns the <code>FFdata</code> list invisibly in addition to (or instead of) saving it.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/FFdownload.html">FFdownload</a></span><span class="op">(</span><span class="va">...</span>, return_data <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co"># New usage:</span></span>
<span><span class="va">FFdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/FFdownload.html">FFdownload</a></span><span class="op">(</span>inputlist <span class="op">=</span> <span class="st">"F-F_Research_Data_Factors"</span>, return_data <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Default is <code>FALSE</code>, so the save-and-load pattern is unchanged. When <code>TRUE</code> and <code>output_file</code> is <code>NULL</code> or <code><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile()</a></code>, no file needs to be written.</p>
<hr></div>
<div class="section level3">
<h3 id="id_44-replace-download--download_only-flags-with-a-action-parameter">4.4 Replace <code>download</code> + <code>download_only</code> flags with a <code>action</code> parameter<a class="anchor" aria-label="anchor" href="#id_44-replace-download--download_only-flags-with-a-action-parameter"></a></h3>
<p><strong>Problem addressed</strong>: §3.4 <strong>Change</strong>: Add a new <code>action</code> parameter as a cleaner alternative. Keep <code>download</code> and <code>download_only</code> fully functional for backward compatibility.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># New parameter (if provided, overrides download/download_only):</span></span>
<span><span class="va">action</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"all"</span>, <span class="st">"list_only"</span>, <span class="st">"download_only"</span>, <span class="st">"process_only"</span><span class="op">)</span></span></code></pre></div>
<table class="table"><colgroup><col width="24%"><col width="76%"></colgroup><thead><tr class="header"><th><code>action</code></th>
<th>Equivalent old flags</th>
</tr></thead><tbody><tr class="odd"><td><code>"all"</code></td>
<td><code>download=TRUE, download_only=FALSE</code></td>
</tr><tr class="even"><td><code>"list_only"</code></td>
<td><code>download=FALSE, download_only=TRUE</code></td>
</tr><tr class="odd"><td><code>"download_only"</code></td>
<td><code>download=TRUE, download_only=TRUE</code></td>
</tr><tr class="even"><td><code>"process_only"</code></td>
<td><code>download=FALSE, download_only=FALSE</code></td>
</tr></tbody></table><p>If <code>action</code> is missing, the old <code>download</code>/<code>download_only</code> logic runs as before.</p>
<hr></div>
<div class="section level3">
<h3 id="id_45-add-date-based-caching-to-tempd">4.5 Add date-based caching to <code>tempd</code>
<a class="anchor" aria-label="anchor" href="#id_45-add-date-based-caching-to-tempd"></a></h3>
<p><strong>Problem addressed</strong>: §3.5 <strong>Change</strong>: Add a <code>cache_days</code> parameter (default <code>Inf</code>, meaning never re-download if file exists — current behaviour). When set to a positive integer, files older than <code>cache_days</code> in <code>tempd</code> are re-downloaded.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/FFdownload.html">FFdownload</a></span><span class="op">(</span><span class="va">...</span>, cache_days <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span></span>
<span><span class="co"># Example: re-download if cached file is older than 7 days</span></span>
<span><span class="fu"><a href="reference/FFdownload.html">FFdownload</a></span><span class="op">(</span><span class="va">...</span>, tempd <span class="op">=</span> <span class="st">"data/ff"</span>, cache_days <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></span></code></pre></div>
<p>This requires only a <code>file.info()$mtime</code> check per zip file before downloading. Default preserves current behaviour.</p>
<hr></div>
<div class="section level3">
<h3 id="id_46-add-fuzzy-match-warning-and-a-match_threshold-parameter">4.6 Add fuzzy-match warning and a <code>match_threshold</code> parameter<a class="anchor" aria-label="anchor" href="#id_46-add-fuzzy-match-warning-and-a-match_threshold-parameter"></a></h3>
<p><strong>Problem addressed</strong>: §3.6 <strong>Change</strong>: After <code><a href="https://rdrr.io/r/utils/adist.html" class="external-link">adist()</a></code> matching, compute the relative edit distance. If it exceeds a threshold, emit a <code><a href="https://rdrr.io/r/base/warning.html" class="external-link">warning()</a></code> listing the matched name alongside the requested name.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/FFdownload.html">FFdownload</a></span><span class="op">(</span><span class="va">...</span>, match_threshold <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span></span>
<span><span class="co"># If edit_distance / nchar(matched_name) &gt; match_threshold → warning</span></span></code></pre></div>
<p>Additionally, expose a helper:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">FFmatch</span><span class="op">(</span><span class="va">inputlist</span>, exclude_daily <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co"># Returns a tibble showing: requested_name → matched_file, edit_distance, similarity</span></span>
<span><span class="co"># Lets users verify matches before downloading</span></span></code></pre></div>
<hr></div>
<div class="section level3">
<h3 id="id_47-name-temp-sub-tables-more-informatively">4.7 Name <code>Temp</code> sub-tables more informatively<a class="anchor" aria-label="anchor" href="#id_47-name-temp-sub-tables-more-informatively"></a></h3>
<p><strong>Problem addressed</strong>: §3.7 <strong>Change</strong>: When a sub-table section has no explicit header, inspect the column names of the parsed data and use them to generate a descriptive fallback name rather than <code>Temp1</code>, <code>Temp2</code>, etc. For example, if columns are <code>Mkt.RF, SMB, HML, RF</code>, name the sub-table <code>"factors"</code>. If this heuristic is not possible, keep the <code>TempN</code> fallback.</p>
<p>Alternatively (simpler and fully backward-compatible): add a <code>verbose_names = FALSE</code> parameter. When <code>TRUE</code>, <code><a href="reference/converter.html">converter()</a></code> logs a message mapping each <code>TempN</code> to the line range and first few column names, helping users understand the structure without changing the output names.</p>
<hr></div>
<div class="section level3">
<h3 id="id_48-add-ffget-single-dataset-convenience-wrapper">4.8 Add <code>FFget()</code>: single-dataset convenience wrapper<a class="anchor" aria-label="anchor" href="#id_48-add-ffget-single-dataset-convenience-wrapper"></a></h3>
<p><strong>Problem addressed</strong>: §3.3, §3.8 <strong>Change</strong>: Export a thin wrapper that downloads and returns one dataset directly, mimicking <code>frenchdata::download_french_data()</code> in spirit while using FFdownload’s full parsing engine (including all sub-tables).</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">FFget</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">name</span>, <span class="va">frequency</span> <span class="op">=</span> <span class="st">"monthly"</span>, <span class="va">subtable</span> <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                  <span class="va">exclude_daily</span> <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">na_values</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">99</span>, <span class="op">-</span><span class="fl">999</span>, <span class="op">-</span><span class="fl">99.99</span><span class="op">)</span>,</span>
<span>                  <span class="va">format</span> <span class="op">=</span> <span class="st">"tbl"</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># calls FFdownload() internally with return_data = TRUE</span></span>
<span>  <span class="co"># extracts FFdata[[paste0("x_", name)]][[frequency]]</span></span>
<span>  <span class="co"># if subtable is NULL, returns all sub-tables as a named list</span></span>
<span>  <span class="co"># if subtable is a string, returns that one tibble/xts directly</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Example usage:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">factors</span> <span class="op">&lt;-</span> <span class="fu">FFget</span><span class="op">(</span><span class="st">"F-F_Research_Data_Factors"</span>, subtable <span class="op">=</span> <span class="st">"Temp2"</span><span class="op">)</span></span></code></pre></div>
<p>This is the single biggest usability improvement for new and interactive users. It does not modify <code><a href="reference/FFdownload.html">FFdownload()</a></code> at all.</p>
<hr></div>
<div class="section level3">
<h3 id="id_49-replace-plyrmlply-with-base-lapply">4.9 Replace <code>plyr::mlply()</code> with base <code>lapply()</code>
<a class="anchor" aria-label="anchor" href="#id_49-replace-plyrmlply-with-base-lapply"></a></h3>
<p><strong>Problem addressed</strong>: §3.9 <strong>Change</strong>: Replace the one <code>plyr</code> call in <code>FFdownload.R</code>:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Current:</span></span>
<span><span class="va">FFdata</span> <span class="op">&lt;-</span> <span class="fu">plyr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plyr/man/mlply.html" class="external-link">mlply</a></span><span class="op">(</span><span class="kw">function</span><span class="op">(</span><span class="va">y</span><span class="op">)</span> <span class="fu"><a href="reference/converter.html">converter</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span>, .data <span class="op">=</span> <span class="va">csv_files</span>, .progress <span class="op">=</span> <span class="st">"text"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Replacement (with optional progress via cli or progressr):</span></span>
<span><span class="va">FFdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">csv_files</span>, <span class="va">converter</span><span class="op">)</span></span></code></pre></div>
<p>The <code>plyr</code> package can then be dropped from <code>Depends</code>. If progress reporting is wanted, use <code><a href="https://cli.r-lib.org/reference/cli_progress_along.html" class="external-link">cli::cli_progress_along()</a></code> or the <code>progressr</code> package (both are lightweight and CRAN-stable). This reduces the dependency footprint and removes a deprecated package from the <code>Depends</code> field (where it currently sits, meaning it is attached to the user’s search path).</p>
<hr></div>
<div class="section level3">
<h3 id="id_410-switch-to-https">4.10 Switch to HTTPS<a class="anchor" aria-label="anchor" href="#id_410-switch-to-https"></a></h3>
<p><strong>Problem addressed</strong>: §3.10 <strong>Change</strong>: Replace the hard-coded base URL:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Current:</span></span>
<span><span class="va">URL</span> <span class="op">&lt;-</span> <span class="st">"http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library.html"</span></span>
<span></span>
<span><span class="co"># Fixed:</span></span>
<span><span class="va">URL</span> <span class="op">&lt;-</span> <span class="st">"https://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library.html"</span></span></code></pre></div>
<p>And similarly for download URLs. One-line change, zero API impact.</p>
<hr></div>
<div class="section level3">
<h3 id="id_411-document-the-sub-table-naming-convention-explicitly">4.11 Document the sub-table naming convention explicitly<a class="anchor" aria-label="anchor" href="#id_411-document-the-sub-table-naming-convention-explicitly"></a></h3>
<p><strong>Problem addressed</strong>: §3.7, §3.8 <strong>Change</strong> (documentation only, no code): Add a dedicated section to the main <code><a href="reference/FFdownload.html">FFdownload()</a></code> man page and the xts vignette explaining: - Why list element names have an <code>x_</code> prefix. - What <code>Temp1</code>, <code>Temp2</code>, etc. mean and how to discover which sub-table is which (<code>names(FFdata[["x_..."]]$monthly)</code>). - A reference table showing the most common datasets and their primary sub-table name (e.g., factor files → <code>Temp2</code>, portfolio files → <code>average_value_weighted_returns</code>).</p>
<hr></div>
</div>
<div class="section level2">
<h2 id="id_5-priority-summary">5. Priority Summary<a class="anchor" aria-label="anchor" href="#id_5-priority-summary"></a></h2>
<table class="table"><thead><tr class="header"><th>#</th>
<th>Suggestion</th>
<th>Effort</th>
<th>Impact</th>
<th>BC risk</th>
</tr></thead><tbody><tr class="odd"><td>4.10</td>
<td>HTTPS URLs</td>
<td>Trivial</td>
<td>Medium</td>
<td>None</td>
</tr><tr class="even"><td>4.9</td>
<td>Remove <code>plyr</code>
</td>
<td>Low</td>
<td>Medium</td>
<td>None</td>
</tr><tr class="odd"><td>4.2</td>
<td>
<code>na_values</code> sentinel → NA</td>
<td>Low</td>
<td>High</td>
<td>None</td>
</tr><tr class="even"><td>4.3</td>
<td>
<code>return_data</code> parameter</td>
<td>Low</td>
<td>High</td>
<td>None</td>
</tr><tr class="odd"><td>4.1</td>
<td>
<code>FFlist()</code> function</td>
<td>Low</td>
<td>High</td>
<td>None</td>
</tr><tr class="even"><td>4.11</td>
<td>Document <code>TempN</code> naming</td>
<td>Low</td>
<td>High</td>
<td>None</td>
</tr><tr class="odd"><td>4.8</td>
<td>
<code>FFget()</code> convenience wrapper</td>
<td>Medium</td>
<td>Very high</td>
<td>None</td>
</tr><tr class="even"><td>4.6</td>
<td>Fuzzy match warning + <code>FFmatch()</code>
</td>
<td>Medium</td>
<td>Medium</td>
<td>None</td>
</tr><tr class="odd"><td>4.5</td>
<td>
<code>cache_days</code> parameter</td>
<td>Medium</td>
<td>Medium</td>
<td>None</td>
</tr><tr class="even"><td>4.4</td>
<td>
<code>action</code> parameter</td>
<td>Medium</td>
<td>Medium</td>
<td>None</td>
</tr><tr class="odd"><td>4.7</td>
<td>Smarter sub-table naming</td>
<td>Medium</td>
<td>Medium</td>
<td>None</td>
</tr></tbody></table></div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sebastian Stoeckl.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

